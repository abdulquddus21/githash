"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload";
exports.ids = ["pages/api/upload"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload.js */ \"(api)/./pages/api/upload.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload\",\n        pathname: \"/api/upload\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXBsb2FkLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpdmF0ZS8/YjNmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVwbG9hZC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/upload.js":
/*!*****************************!*\
  !*** ./pages/api/upload.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Supabase konfiguratsiyasi\nconst supabaseUrl = \"https://xzbwfoacsnrmgjmildcr.supabase.co\";\nconst supabaseServiceKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6Yndmb2Fjc25ybWdqbWlsZGNyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1ODE5OTE3NSwiZXhwIjoyMDczNzc1MTc1fQ.t0u8Uy7D7N3KWgNthFTijhCucN4VcFc39QAPAwDYXfo\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseServiceKey);\n// Bucket nomi\nconst BUCKET_NAME = \"Uploads\";\n// Ruxsat berilgan fayl turlari\nconst ALLOWED_FILE_TYPES = {\n    images: [\n        \".jpg\",\n        \".jpeg\",\n        \".png\",\n        \".gif\",\n        \".webp\",\n        \".svg\",\n        \".bmp\",\n        \".tiff\"\n    ],\n    videos: [\n        \".mp4\",\n        \".avi\",\n        \".mkv\",\n        \".mov\",\n        \".wmv\",\n        \".flv\",\n        \".webm\",\n        \".m4v\",\n        \".mpeg\"\n    ],\n    documents: [\n        \".pdf\",\n        \".doc\",\n        \".docx\",\n        \".txt\",\n        \".rtf\"\n    ],\n    audio: [\n        \".mp3\",\n        \".wav\",\n        \".aac\",\n        \".ogg\",\n        \".flac\"\n    ],\n    archives: [\n        \".zip\",\n        \".rar\",\n        \".7z\",\n        \".tar\",\n        \".gz\"\n    ]\n};\n// MIME type tekshiruvi\nconst ALLOWED_MIME_TYPES = [\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/webp\",\n    \"image/svg+xml\",\n    \"image/bmp\",\n    \"image/tiff\",\n    \"video/mp4\",\n    \"video/avi\",\n    \"video/quicktime\",\n    \"video/x-msvideo\",\n    \"video/x-ms-wmv\",\n    \"video/x-flv\",\n    \"video/webm\",\n    \"video/mpeg\",\n    \"application/pdf\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"text/plain\",\n    \"application/rtf\",\n    \"audio/mpeg\",\n    \"audio/wav\",\n    \"audio/aac\",\n    \"audio/ogg\",\n    \"audio/flac\",\n    \"application/zip\",\n    \"application/x-rar-compressed\",\n    \"application/x-7z-compressed\",\n    \"application/x-tar\",\n    \"application/gzip\"\n];\n// Xavfli fayl kengaytmalari\nconst DANGEROUS_EXTENSIONS = [\n    \".exe\",\n    \".bat\",\n    \".cmd\",\n    \".scr\",\n    \".pif\",\n    \".com\",\n    \".js\",\n    \".vbs\",\n    \".jar\"\n];\n// Maksimal fayllar soni\nconst MAX_FILES = 20;\n// Fayl turini tekshirish\nfunction isFileTypeAllowed(filename, mimetype) {\n    const extension = path__WEBPACK_IMPORTED_MODULE_3___default().extname(filename).toLowerCase();\n    if (DANGEROUS_EXTENSIONS.includes(extension)) {\n        console.log(`Xavfli fayl turi aniqlandi: ${filename}`);\n        return false;\n    }\n    const allAllowedExtensions = Object.values(ALLOWED_FILE_TYPES).flat();\n    const isExtensionAllowed = allAllowedExtensions.includes(extension);\n    const isMimeTypeAllowed = ALLOWED_MIME_TYPES.includes(mimetype);\n    return isExtensionAllowed && isMimeTypeAllowed;\n}\n// Fayl nomini tozalash\nfunction sanitizeFilename(filename) {\n    return filename.replace(/[^a-zA-Z0-9\\-_\\.]/g, \"_\");\n}\n// Bucket mavjudligini tekshirish\nasync function ensureBucketExists() {\n    try {\n        const { data: buckets, error } = await supabase.storage.listBuckets();\n        if (error) {\n            console.error(\"Bucket ro‘yxatini olishda xato:\", error.message);\n            return false;\n        }\n        const bucketExists = buckets.some((bucket)=>bucket.name === BUCKET_NAME);\n        if (!bucketExists) {\n            const { error: createError } = await supabase.storage.createBucket(BUCKET_NAME, {\n                public: true,\n                allowedMimeTypes: ALLOWED_MIME_TYPES\n            });\n            if (createError) {\n                console.error(\"Bucket yaratishda xato:\", createError.message);\n                return false;\n            }\n            console.log(`Bucket \"${BUCKET_NAME}\" yaratildi`);\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Bucketni tekshirishda xato:\", error.message);\n        return false;\n    }\n}\n// Faylni yuklash (buffer usuli)\nasync function uploadFile(filePath, destinationPath, mimetype) {\n    try {\n        const fileBuffer = await fs__WEBPACK_IMPORTED_MODULE_2___default().promises.readFile(filePath);\n        const { data, error } = await supabase.storage.from(BUCKET_NAME).upload(destinationPath, fileBuffer, {\n            contentType: mimetype,\n            upsert: false\n        });\n        if (error) {\n            console.error(`Supabase yuklash xatosi (path: ${destinationPath}):`, error.message);\n            throw error;\n        }\n        return {\n            data,\n            error\n        };\n    } catch (error) {\n        console.error(`Faylni yuklashda xato (path: ${destinationPath}):`, error.message);\n        throw error;\n    }\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Faqat POST so‘rovlari qabul qilinadi\"\n        });\n    }\n    try {\n        // Bucket mavjudligini tekshirish\n        const bucketReady = await ensureBucketExists();\n        if (!bucketReady) {\n            return res.status(500).json({\n                error: \"Storage bucket tayyorlanmadi\"\n            });\n        }\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_0__.IncomingForm({\n            maxFiles: MAX_FILES,\n            allowEmptyFiles: false,\n            minFileSize: 1,\n            multiples: true,\n            keepExtensions: true,\n            encoding: \"utf-8\"\n        });\n        const { fields, files } = await new Promise((resolve, reject)=>{\n            form.parse(req, (err, fields, files)=>{\n                if (err) {\n                    console.error(\"Form parse xatosi:\", err.message);\n                    reject(err);\n                }\n                resolve({\n                    fields,\n                    files\n                });\n            });\n        });\n        if (!files.file) {\n            return res.status(400).json({\n                error: \"Hech qanday fayl yuklanmadi\"\n            });\n        }\n        let uploadedFiles = Array.isArray(files.file) ? files.file : [\n            files.file\n        ];\n        if (uploadedFiles.length > MAX_FILES) {\n            uploadedFiles.forEach((file)=>{\n                try {\n                    if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(file.filepath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                    }\n                } catch (unlinkError) {\n                    console.error(\"Vaqtinchalik faylni o‘chirishda xato:\", unlinkError.message);\n                }\n            });\n            return res.status(400).json({\n                error: `Fayllar soni juda ko‘p (maksimum ${MAX_FILES} ta)`\n            });\n        }\n        const results = [];\n        const errors = [];\n        const type = Array.isArray(fields.type) ? fields.type[0] : fields.type;\n        const username = Array.isArray(fields.username) ? fields.username[0] : fields.username;\n        const postIndex = Array.isArray(fields.postIndex) ? fields.postIndex[0] : fields.postIndex;\n        for (const file of uploadedFiles){\n            try {\n                const originalName = file.originalFilename || \"unknown\";\n                const mimetype = file.mimetype || \"application/octet-stream\";\n                const fileSize = file.size;\n                console.log(`Fayl: ${originalName}, Hajmi: ${(fileSize / 1024 / 1024).toFixed(2)}MB, Turi: ${type}`);\n                // Fayl turini tekshirish\n                if (!isFileTypeAllowed(originalName, mimetype)) {\n                    if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(file.filepath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                    }\n                    errors.push({\n                        filename: originalName,\n                        error: \"Ushbu fayl turi ruxsat berilmagan\"\n                    });\n                    continue;\n                }\n                // Fayl nomini tozalash\n                const safeOriginalName = sanitizeFilename(originalName);\n                const fileExtension = path__WEBPACK_IMPORTED_MODULE_3___default().extname(safeOriginalName);\n                const timestamp = Date.now();\n                const randomString = Math.random().toString(36).substring(2, 8);\n                let fileName;\n                let folderPath;\n                if (type === \"profile\") {\n                    folderPath = \"profiles\";\n                    fileName = `${username}_${timestamp}_${randomString}${fileExtension}`;\n                } else {\n                    folderPath = \"posts\";\n                    const postSuffix = postIndex !== undefined ? `_post${postIndex}` : \"\";\n                    fileName = `${username}${postSuffix}_${timestamp}_${randomString}${fileExtension}`;\n                }\n                const filePath = `${folderPath}/${fileName}`;\n                // Faylni yuklash\n                const { data: uploadData, error: uploadError } = await uploadFile(file.filepath, filePath, mimetype);\n                if (uploadError) {\n                    console.error(\"Supabase yuklash xatosi:\", originalName, uploadError.message);\n                    errors.push({\n                        filename: originalName,\n                        error: `Faylni saqlashda xatolik: ${uploadError.message}`\n                    });\n                    continue;\n                }\n                // Public URL olish\n                const { data: urlData } = supabase.storage.from(BUCKET_NAME).getPublicUrl(filePath);\n                const publicUrl = urlData.publicUrl;\n                results.push({\n                    success: true,\n                    url: publicUrl,\n                    filename: fileName,\n                    originalName: originalName,\n                    fileSize: fileSize,\n                    mimeType: mimetype,\n                    path: filePath,\n                    bucket: BUCKET_NAME,\n                    type: type\n                });\n                console.log(`Fayl muvaffaqiyatli yuklandi: ${originalName} -> ${publicUrl}`);\n                // Vaqtinchalik faylni o‘chirish\n                if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(file.filepath)) {\n                    fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                }\n            } catch (fileError) {\n                console.error(\"Faylni qayta ishlashda xato:\", file.originalFilename, fileError.message);\n                errors.push({\n                    filename: file.originalFilename || \"unknown\",\n                    error: `Faylni qayta ishlashda xato: ${fileError.message}`\n                });\n                if (file.filepath && fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(file.filepath)) {\n                    try {\n                        fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                    } catch (unlinkError) {\n                        console.error(\"Vaqtinchalik faylni o‘chirishda xato:\", unlinkError.message);\n                    }\n                }\n            }\n        }\n        const response = {\n            success: errors.length === 0,\n            uploaded: results,\n            errors: errors,\n            summary: {\n                totalFiles: uploadedFiles.length,\n                successful: results.length,\n                failed: errors.length\n            }\n        };\n        return res.status(errors.length > 0 ? 207 : 200).json(response);\n    } catch (error) {\n        console.error(\"Umumiy xato:\", error.message);\n        return res.status(500).json({\n            error: \"Ichki server xatoligi\",\n            details: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU92QixJQUFJRSxNQUFNLENBQUM0QixPQUFPUCxNQUFNLEdBQUcsSUFBSSxNQUFNLEtBQUtwQixJQUFJLENBQUM0RDtJQUN4RCxFQUFFLE9BQU92RixPQUFPO1FBQ2RiLFFBQVFhLEtBQUssQ0FBQyxnQkFBZ0JBLE1BQU1HLE9BQU87UUFDM0MsT0FBT3FCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTNCLE9BQU87WUFBeUI2RixTQUFTN0YsTUFBTUcsT0FBTztRQUFDO0lBQ3ZGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcml2YXRlLy4vcGFnZXMvYXBpL3VwbG9hZC5qcz81NTcyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluY29taW5nRm9ybSB9IGZyb20gJ2Zvcm1pZGFibGUnO1xyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgYXBpOiB7XHJcbiAgICBib2R5UGFyc2VyOiBmYWxzZSxcclxuICB9LFxyXG59O1xyXG5cclxuLy8gU3VwYWJhc2Uga29uZmlndXJhdHNpeWFzaVxyXG5jb25zdCBzdXBhYmFzZVVybCA9IFwiaHR0cHM6Ly94emJ3Zm9hY3Nucm1nam1pbGRjci5zdXBhYmFzZS5jb1wiO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkluaDZZbmRtYjJGamMyNXliV2RxYldsc1pHTnlJaXdpY205c1pTSTZJbk5sY25acFkyVmZjbTlzWlNJc0ltbGhkQ0k2TVRjMU9ERTVPVEUzTlN3aVpYaHdJam95TURjek56YzFNVGMxZlEudDB1OFV5N0Q3TjNLV2dOdGhGVGlqaEN1Y040VmNGYzM5UUFQQXdEWVhmb1wiO1xyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5KTtcclxuXHJcbi8vIEJ1Y2tldCBub21pXHJcbmNvbnN0IEJVQ0tFVF9OQU1FID0gJ1VwbG9hZHMnO1xyXG5cclxuLy8gUnV4c2F0IGJlcmlsZ2FuIGZheWwgdHVybGFyaVxyXG5jb25zdCBBTExPV0VEX0ZJTEVfVFlQRVMgPSB7XHJcbiAgaW1hZ2VzOiBbJy5qcGcnLCAnLmpwZWcnLCAnLnBuZycsICcuZ2lmJywgJy53ZWJwJywgJy5zdmcnLCAnLmJtcCcsICcudGlmZiddLFxyXG4gIHZpZGVvczogWycubXA0JywgJy5hdmknLCAnLm1rdicsICcubW92JywgJy53bXYnLCAnLmZsdicsICcud2VibScsICcubTR2JywgJy5tcGVnJ10sXHJcbiAgZG9jdW1lbnRzOiBbJy5wZGYnLCAnLmRvYycsICcuZG9jeCcsICcudHh0JywgJy5ydGYnXSxcclxuICBhdWRpbzogWycubXAzJywgJy53YXYnLCAnLmFhYycsICcub2dnJywgJy5mbGFjJ10sXHJcbiAgYXJjaGl2ZXM6IFsnLnppcCcsICcucmFyJywgJy43eicsICcudGFyJywgJy5neiddLFxyXG59O1xyXG5cclxuLy8gTUlNRSB0eXBlIHRla3NoaXJ1dmlcclxuY29uc3QgQUxMT1dFRF9NSU1FX1RZUEVTID0gW1xyXG4gICdpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9naWYnLCAnaW1hZ2Uvd2VicCcsICdpbWFnZS9zdmcreG1sJyxcclxuICAnaW1hZ2UvYm1wJywgJ2ltYWdlL3RpZmYnLFxyXG4gICd2aWRlby9tcDQnLCAndmlkZW8vYXZpJywgJ3ZpZGVvL3F1aWNrdGltZScsICd2aWRlby94LW1zdmlkZW8nLFxyXG4gICd2aWRlby94LW1zLXdtdicsICd2aWRlby94LWZsdicsICd2aWRlby93ZWJtJywgJ3ZpZGVvL21wZWcnLFxyXG4gICdhcHBsaWNhdGlvbi9wZGYnLCAnYXBwbGljYXRpb24vbXN3b3JkJyxcclxuICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxyXG4gICd0ZXh0L3BsYWluJywgJ2FwcGxpY2F0aW9uL3J0ZicsXHJcbiAgJ2F1ZGlvL21wZWcnLCAnYXVkaW8vd2F2JywgJ2F1ZGlvL2FhYycsICdhdWRpby9vZ2cnLCAnYXVkaW8vZmxhYycsXHJcbiAgJ2FwcGxpY2F0aW9uL3ppcCcsICdhcHBsaWNhdGlvbi94LXJhci1jb21wcmVzc2VkJywgJ2FwcGxpY2F0aW9uL3gtN3otY29tcHJlc3NlZCcsXHJcbiAgJ2FwcGxpY2F0aW9uL3gtdGFyJywgJ2FwcGxpY2F0aW9uL2d6aXAnLFxyXG5dO1xyXG5cclxuLy8gWGF2ZmxpIGZheWwga2VuZ2F5dG1hbGFyaVxyXG5jb25zdCBEQU5HRVJPVVNfRVhURU5TSU9OUyA9IFsnLmV4ZScsICcuYmF0JywgJy5jbWQnLCAnLnNjcicsICcucGlmJywgJy5jb20nLCAnLmpzJywgJy52YnMnLCAnLmphciddO1xyXG5cclxuLy8gTWFrc2ltYWwgZmF5bGxhciBzb25pXHJcbmNvbnN0IE1BWF9GSUxFUyA9IDIwO1xyXG5cclxuLy8gRmF5bCB0dXJpbmkgdGVrc2hpcmlzaFxyXG5mdW5jdGlvbiBpc0ZpbGVUeXBlQWxsb3dlZChmaWxlbmFtZSwgbWltZXR5cGUpIHtcclxuICBjb25zdCBleHRlbnNpb24gPSBwYXRoLmV4dG5hbWUoZmlsZW5hbWUpLnRvTG93ZXJDYXNlKCk7XHJcbiAgaWYgKERBTkdFUk9VU19FWFRFTlNJT05TLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcclxuICAgIGNvbnNvbGUubG9nKGBYYXZmbGkgZmF5bCB0dXJpIGFuaXFsYW5kaTogJHtmaWxlbmFtZX1gKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgY29uc3QgYWxsQWxsb3dlZEV4dGVuc2lvbnMgPSBPYmplY3QudmFsdWVzKEFMTE9XRURfRklMRV9UWVBFUykuZmxhdCgpO1xyXG4gIGNvbnN0IGlzRXh0ZW5zaW9uQWxsb3dlZCA9IGFsbEFsbG93ZWRFeHRlbnNpb25zLmluY2x1ZGVzKGV4dGVuc2lvbik7XHJcbiAgY29uc3QgaXNNaW1lVHlwZUFsbG93ZWQgPSBBTExPV0VEX01JTUVfVFlQRVMuaW5jbHVkZXMobWltZXR5cGUpO1xyXG4gIHJldHVybiBpc0V4dGVuc2lvbkFsbG93ZWQgJiYgaXNNaW1lVHlwZUFsbG93ZWQ7XHJcbn1cclxuXHJcbi8vIEZheWwgbm9taW5pIHRvemFsYXNoXHJcbmZ1bmN0aW9uIHNhbml0aXplRmlsZW5hbWUoZmlsZW5hbWUpIHtcclxuICByZXR1cm4gZmlsZW5hbWUucmVwbGFjZSgvW15hLXpBLVowLTlcXC1fXFwuXS9nLCAnXycpO1xyXG59XHJcblxyXG4vLyBCdWNrZXQgbWF2anVkbGlnaW5pIHRla3NoaXJpc2hcclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlQnVja2V0RXhpc3RzKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGJ1Y2tldHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlLmxpc3RCdWNrZXRzKCk7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignQnVja2V0IHJv4oCYeXhhdGluaSBvbGlzaGRhIHhhdG86JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGJ1Y2tldEV4aXN0cyA9IGJ1Y2tldHMuc29tZSgoYnVja2V0KSA9PiBidWNrZXQubmFtZSA9PT0gQlVDS0VUX05BTUUpO1xyXG4gICAgaWYgKCFidWNrZXRFeGlzdHMpIHtcclxuICAgICAgY29uc3QgeyBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UuY3JlYXRlQnVja2V0KEJVQ0tFVF9OQU1FLCB7XHJcbiAgICAgICAgcHVibGljOiB0cnVlLFxyXG4gICAgICAgIGFsbG93ZWRNaW1lVHlwZXM6IEFMTE9XRURfTUlNRV9UWVBFUyxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChjcmVhdGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0J1Y2tldCB5YXJhdGlzaGRhIHhhdG86JywgY3JlYXRlRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnNvbGUubG9nKGBCdWNrZXQgXCIke0JVQ0tFVF9OQU1FfVwiIHlhcmF0aWxkaWApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0J1Y2tldG5pIHRla3NoaXJpc2hkYSB4YXRvOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRmF5bG5pIHl1a2xhc2ggKGJ1ZmZlciB1c3VsaSlcclxuYXN5bmMgZnVuY3Rpb24gdXBsb2FkRmlsZShmaWxlUGF0aCwgZGVzdGluYXRpb25QYXRoLCBtaW1ldHlwZSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUoZmlsZVBhdGgpO1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgICAuZnJvbShCVUNLRVRfTkFNRSlcclxuICAgICAgLnVwbG9hZChkZXN0aW5hdGlvblBhdGgsIGZpbGVCdWZmZXIsIHtcclxuICAgICAgICBjb250ZW50VHlwZTogbWltZXR5cGUsXHJcbiAgICAgICAgdXBzZXJ0OiBmYWxzZSxcclxuICAgICAgfSk7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgU3VwYWJhc2UgeXVrbGFzaCB4YXRvc2kgKHBhdGg6ICR7ZGVzdGluYXRpb25QYXRofSk6YCwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgRmF5bG5pIHl1a2xhc2hkYSB4YXRvIChwYXRoOiAke2Rlc3RpbmF0aW9uUGF0aH0pOmAsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdGYXFhdCBQT1NUIHNv4oCYcm92bGFyaSBxYWJ1bCBxaWxpbmFkaScgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gQnVja2V0IG1hdmp1ZGxpZ2luaSB0ZWtzaGlyaXNoXHJcbiAgICBjb25zdCBidWNrZXRSZWFkeSA9IGF3YWl0IGVuc3VyZUJ1Y2tldEV4aXN0cygpO1xyXG4gICAgaWYgKCFidWNrZXRSZWFkeSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1N0b3JhZ2UgYnVja2V0IHRheXlvcmxhbm1hZGknIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgSW5jb21pbmdGb3JtKHtcclxuICAgICAgbWF4RmlsZXM6IE1BWF9GSUxFUyxcclxuICAgICAgYWxsb3dFbXB0eUZpbGVzOiBmYWxzZSxcclxuICAgICAgbWluRmlsZVNpemU6IDEsXHJcbiAgICAgIG11bHRpcGxlczogdHJ1ZSxcclxuICAgICAga2VlcEV4dGVuc2lvbnM6IHRydWUsXHJcbiAgICAgIGVuY29kaW5nOiAndXRmLTgnLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgeyBmaWVsZHMsIGZpbGVzIH0gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGZvcm0ucGFyc2UocmVxLCAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRm9ybSBwYXJzZSB4YXRvc2k6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc29sdmUoeyBmaWVsZHMsIGZpbGVzIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghZmlsZXMuZmlsZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0hlY2ggcWFuZGF5IGZheWwgeXVrbGFubWFkaScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHVwbG9hZGVkRmlsZXMgPSBBcnJheS5pc0FycmF5KGZpbGVzLmZpbGUpID8gZmlsZXMuZmlsZSA6IFtmaWxlcy5maWxlXTtcclxuICAgIGlmICh1cGxvYWRlZEZpbGVzLmxlbmd0aCA+IE1BWF9GSUxFUykge1xyXG4gICAgICB1cGxvYWRlZEZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZS5maWxlcGF0aCkpIHtcclxuICAgICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlLmZpbGVwYXRoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoICh1bmxpbmtFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignVmFxdGluY2hhbGlrIGZheWxuaSBv4oCYY2hpcmlzaGRhIHhhdG86JywgdW5saW5rRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGBGYXlsbGFyIHNvbmkganVkYSBrb+KAmHAgKG1ha3NpbXVtICR7TUFYX0ZJTEVTfSB0YSlgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcclxuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xyXG5cclxuICAgIGNvbnN0IHR5cGUgPSBBcnJheS5pc0FycmF5KGZpZWxkcy50eXBlKSA/IGZpZWxkcy50eXBlWzBdIDogZmllbGRzLnR5cGU7XHJcbiAgICBjb25zdCB1c2VybmFtZSA9IEFycmF5LmlzQXJyYXkoZmllbGRzLnVzZXJuYW1lKSA/IGZpZWxkcy51c2VybmFtZVswXSA6IGZpZWxkcy51c2VybmFtZTtcclxuICAgIGNvbnN0IHBvc3RJbmRleCA9IEFycmF5LmlzQXJyYXkoZmllbGRzLnBvc3RJbmRleCkgPyBmaWVsZHMucG9zdEluZGV4WzBdIDogZmllbGRzLnBvc3RJbmRleDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdXBsb2FkZWRGaWxlcykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGZpbGUub3JpZ2luYWxGaWxlbmFtZSB8fCAndW5rbm93bic7XHJcbiAgICAgICAgY29uc3QgbWltZXR5cGUgPSBmaWxlLm1pbWV0eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xyXG4gICAgICAgIGNvbnN0IGZpbGVTaXplID0gZmlsZS5zaXplO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhgRmF5bDogJHtvcmlnaW5hbE5hbWV9LCBIYWptaTogJHsoZmlsZVNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQiwgVHVyaTogJHt0eXBlfWApO1xyXG5cclxuICAgICAgICAvLyBGYXlsIHR1cmluaSB0ZWtzaGlyaXNoXHJcbiAgICAgICAgaWYgKCFpc0ZpbGVUeXBlQWxsb3dlZChvcmlnaW5hbE5hbWUsIG1pbWV0eXBlKSkge1xyXG4gICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZS5maWxlcGF0aCkpIHtcclxuICAgICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlLmZpbGVwYXRoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVycm9ycy5wdXNoKHsgZmlsZW5hbWU6IG9yaWdpbmFsTmFtZSwgZXJyb3I6ICdVc2hidSBmYXlsIHR1cmkgcnV4c2F0IGJlcmlsbWFnYW4nIH0pO1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGYXlsIG5vbWluaSB0b3phbGFzaFxyXG4gICAgICAgIGNvbnN0IHNhZmVPcmlnaW5hbE5hbWUgPSBzYW5pdGl6ZUZpbGVuYW1lKG9yaWdpbmFsTmFtZSk7XHJcbiAgICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IHBhdGguZXh0bmFtZShzYWZlT3JpZ2luYWxOYW1lKTtcclxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbVN0cmluZyA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KTtcclxuICAgICAgICBsZXQgZmlsZU5hbWU7XHJcbiAgICAgICAgbGV0IGZvbGRlclBhdGg7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSAncHJvZmlsZScpIHtcclxuICAgICAgICAgIGZvbGRlclBhdGggPSAncHJvZmlsZXMnO1xyXG4gICAgICAgICAgZmlsZU5hbWUgPSBgJHt1c2VybmFtZX1fJHt0aW1lc3RhbXB9XyR7cmFuZG9tU3RyaW5nfSR7ZmlsZUV4dGVuc2lvbn1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmb2xkZXJQYXRoID0gJ3Bvc3RzJztcclxuICAgICAgICAgIGNvbnN0IHBvc3RTdWZmaXggPSBwb3N0SW5kZXggIT09IHVuZGVmaW5lZCA/IGBfcG9zdCR7cG9zdEluZGV4fWAgOiAnJztcclxuICAgICAgICAgIGZpbGVOYW1lID0gYCR7dXNlcm5hbWV9JHtwb3N0U3VmZml4fV8ke3RpbWVzdGFtcH1fJHtyYW5kb21TdHJpbmd9JHtmaWxlRXh0ZW5zaW9ufWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcclxuXHJcbiAgICAgICAgLy8gRmF5bG5pIHl1a2xhc2hcclxuICAgICAgICBjb25zdCB7IGRhdGE6IHVwbG9hZERhdGEsIGVycm9yOiB1cGxvYWRFcnJvciB9ID0gYXdhaXQgdXBsb2FkRmlsZShmaWxlLmZpbGVwYXRoLCBmaWxlUGF0aCwgbWltZXR5cGUpO1xyXG5cclxuICAgICAgICBpZiAodXBsb2FkRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHl1a2xhc2ggeGF0b3NpOicsIG9yaWdpbmFsTmFtZSwgdXBsb2FkRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaCh7IGZpbGVuYW1lOiBvcmlnaW5hbE5hbWUsIGVycm9yOiBgRmF5bG5pIHNhcWxhc2hkYSB4YXRvbGlrOiAke3VwbG9hZEVycm9yLm1lc3NhZ2V9YCB9KTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUHVibGljIFVSTCBvbGlzaFxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogdXJsRGF0YSB9ID0gc3VwYWJhc2Uuc3RvcmFnZS5mcm9tKEJVQ0tFVF9OQU1FKS5nZXRQdWJsaWNVcmwoZmlsZVBhdGgpO1xyXG4gICAgICAgIGNvbnN0IHB1YmxpY1VybCA9IHVybERhdGEucHVibGljVXJsO1xyXG5cclxuICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIHVybDogcHVibGljVXJsLFxyXG4gICAgICAgICAgZmlsZW5hbWU6IGZpbGVOYW1lLFxyXG4gICAgICAgICAgb3JpZ2luYWxOYW1lOiBvcmlnaW5hbE5hbWUsXHJcbiAgICAgICAgICBmaWxlU2l6ZTogZmlsZVNpemUsXHJcbiAgICAgICAgICBtaW1lVHlwZTogbWltZXR5cGUsXHJcbiAgICAgICAgICBwYXRoOiBmaWxlUGF0aCxcclxuICAgICAgICAgIGJ1Y2tldDogQlVDS0VUX05BTUUsXHJcbiAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhgRmF5bCBtdXZhZmZhcWl5YXRsaSB5dWtsYW5kaTogJHtvcmlnaW5hbE5hbWV9IC0+ICR7cHVibGljVXJsfWApO1xyXG5cclxuICAgICAgICAvLyBWYXF0aW5jaGFsaWsgZmF5bG5pIG/igJhjaGlyaXNoXHJcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZS5maWxlcGF0aCkpIHtcclxuICAgICAgICAgIGZzLnVubGlua1N5bmMoZmlsZS5maWxlcGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChmaWxlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYXlsbmkgcWF5dGEgaXNobGFzaGRhIHhhdG86JywgZmlsZS5vcmlnaW5hbEZpbGVuYW1lLCBmaWxlRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goeyBmaWxlbmFtZTogZmlsZS5vcmlnaW5hbEZpbGVuYW1lIHx8ICd1bmtub3duJywgZXJyb3I6IGBGYXlsbmkgcWF5dGEgaXNobGFzaGRhIHhhdG86ICR7ZmlsZUVycm9yLm1lc3NhZ2V9YCB9KTtcclxuICAgICAgICBpZiAoZmlsZS5maWxlcGF0aCAmJiBmcy5leGlzdHNTeW5jKGZpbGUuZmlsZXBhdGgpKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGUuZmlsZXBhdGgpO1xyXG4gICAgICAgICAgfSBjYXRjaCAodW5saW5rRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVmFxdGluY2hhbGlrIGZheWxuaSBv4oCYY2hpcmlzaGRhIHhhdG86JywgdW5saW5rRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XHJcbiAgICAgIHN1Y2Nlc3M6IGVycm9ycy5sZW5ndGggPT09IDAsXHJcbiAgICAgIHVwbG9hZGVkOiByZXN1bHRzLFxyXG4gICAgICBlcnJvcnM6IGVycm9ycyxcclxuICAgICAgc3VtbWFyeToge1xyXG4gICAgICAgIHRvdGFsRmlsZXM6IHVwbG9hZGVkRmlsZXMubGVuZ3RoLFxyXG4gICAgICAgIHN1Y2Nlc3NmdWw6IHJlc3VsdHMubGVuZ3RoLFxyXG4gICAgICAgIGZhaWxlZDogZXJyb3JzLmxlbmd0aCxcclxuICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoZXJyb3JzLmxlbmd0aCA+IDAgPyAyMDcgOiAyMDApLmpzb24ocmVzcG9uc2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVbXVtaXkgeGF0bzonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSWNoa2kgc2VydmVyIHhhdG9saWdpJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiSW5jb21pbmdGb3JtIiwiY3JlYXRlQ2xpZW50IiwiZnMiLCJwYXRoIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsInN1cGFiYXNlVXJsIiwic3VwYWJhc2VTZXJ2aWNlS2V5Iiwic3VwYWJhc2UiLCJCVUNLRVRfTkFNRSIsIkFMTE9XRURfRklMRV9UWVBFUyIsImltYWdlcyIsInZpZGVvcyIsImRvY3VtZW50cyIsImF1ZGlvIiwiYXJjaGl2ZXMiLCJBTExPV0VEX01JTUVfVFlQRVMiLCJEQU5HRVJPVVNfRVhURU5TSU9OUyIsIk1BWF9GSUxFUyIsImlzRmlsZVR5cGVBbGxvd2VkIiwiZmlsZW5hbWUiLCJtaW1ldHlwZSIsImV4dGVuc2lvbiIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiY29uc29sZSIsImxvZyIsImFsbEFsbG93ZWRFeHRlbnNpb25zIiwiT2JqZWN0IiwidmFsdWVzIiwiZmxhdCIsImlzRXh0ZW5zaW9uQWxsb3dlZCIsImlzTWltZVR5cGVBbGxvd2VkIiwic2FuaXRpemVGaWxlbmFtZSIsInJlcGxhY2UiLCJlbnN1cmVCdWNrZXRFeGlzdHMiLCJkYXRhIiwiYnVja2V0cyIsImVycm9yIiwic3RvcmFnZSIsImxpc3RCdWNrZXRzIiwibWVzc2FnZSIsImJ1Y2tldEV4aXN0cyIsInNvbWUiLCJidWNrZXQiLCJuYW1lIiwiY3JlYXRlRXJyb3IiLCJjcmVhdGVCdWNrZXQiLCJwdWJsaWMiLCJhbGxvd2VkTWltZVR5cGVzIiwidXBsb2FkRmlsZSIsImZpbGVQYXRoIiwiZGVzdGluYXRpb25QYXRoIiwiZmlsZUJ1ZmZlciIsInByb21pc2VzIiwicmVhZEZpbGUiLCJmcm9tIiwidXBsb2FkIiwiY29udGVudFR5cGUiLCJ1cHNlcnQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImJ1Y2tldFJlYWR5IiwiZm9ybSIsIm1heEZpbGVzIiwiYWxsb3dFbXB0eUZpbGVzIiwibWluRmlsZVNpemUiLCJtdWx0aXBsZXMiLCJrZWVwRXh0ZW5zaW9ucyIsImVuY29kaW5nIiwiZmllbGRzIiwiZmlsZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInBhcnNlIiwiZXJyIiwiZmlsZSIsInVwbG9hZGVkRmlsZXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJmb3JFYWNoIiwiZXhpc3RzU3luYyIsImZpbGVwYXRoIiwidW5saW5rU3luYyIsInVubGlua0Vycm9yIiwicmVzdWx0cyIsImVycm9ycyIsInR5cGUiLCJ1c2VybmFtZSIsInBvc3RJbmRleCIsIm9yaWdpbmFsTmFtZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJmaWxlU2l6ZSIsInNpemUiLCJ0b0ZpeGVkIiwicHVzaCIsInNhZmVPcmlnaW5hbE5hbWUiLCJmaWxlRXh0ZW5zaW9uIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInJhbmRvbVN0cmluZyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImZpbGVOYW1lIiwiZm9sZGVyUGF0aCIsInBvc3RTdWZmaXgiLCJ1bmRlZmluZWQiLCJ1cGxvYWREYXRhIiwidXBsb2FkRXJyb3IiLCJ1cmxEYXRhIiwiZ2V0UHVibGljVXJsIiwicHVibGljVXJsIiwic3VjY2VzcyIsInVybCIsIm1pbWVUeXBlIiwiZmlsZUVycm9yIiwicmVzcG9uc2UiLCJ1cGxvYWRlZCIsInN1bW1hcnkiLCJ0b3RhbEZpbGVzIiwic3VjY2Vzc2Z1bCIsImZhaWxlZCIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();