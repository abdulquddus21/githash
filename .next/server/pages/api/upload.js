"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload";
exports.ids = ["pages/api/upload"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload.js */ \"(api)/./pages/api/upload.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload\",\n        pathname: \"/api/upload\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXBsb2FkLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpdmF0ZS8/YjNmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVwbG9hZC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/upload.js":
/*!*****************************!*\
  !*** ./pages/api/upload.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Supabase konfiguratsiyasi\nconst supabaseUrl = \"https://xzbwfoacsnrmgjmildcr.supabase.co\";\nconst supabaseServiceKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6Yndmb2Fjc25ybWdqbWlsZGNyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1ODE5OTE3NSwiZXhwIjoyMDczNzc1MTc1fQ.t0u8Uy7D7N3KWgNthFTijhCucN4VcFc39QAPAwDYXfo\"; // Service role key ishlatish kerak\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseServiceKey);\n// Bucket nomi\nconst BUCKET_NAME = \"uploads\"; // Supabase da bucket yaratish kerak\n// Ruxsat berilgan file turlari\nconst ALLOWED_FILE_TYPES = {\n    images: [\n        \".jpg\",\n        \".jpeg\",\n        \".png\",\n        \".gif\",\n        \".webp\",\n        \".svg\",\n        \".bmp\",\n        \".tiff\"\n    ],\n    videos: [\n        \".mp4\",\n        \".avi\",\n        \".mkv\",\n        \".mov\",\n        \".wmv\",\n        \".flv\",\n        \".webm\",\n        \".m4v\"\n    ],\n    documents: [\n        \".pdf\",\n        \".doc\",\n        \".docx\",\n        \".txt\",\n        \".rtf\"\n    ],\n    audio: [\n        \".mp3\",\n        \".wav\",\n        \".aac\",\n        \".ogg\",\n        \".flac\"\n    ],\n    archives: [\n        \".zip\",\n        \".rar\",\n        \".7z\",\n        \".tar\",\n        \".gz\"\n    ]\n};\n// MIME type tekshiruvi\nconst ALLOWED_MIME_TYPES = [\n    // Rasm fayllari\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/webp\",\n    \"image/svg+xml\",\n    \"image/bmp\",\n    \"image/tiff\",\n    // Video fayllar\n    \"video/mp4\",\n    \"video/avi\",\n    \"video/quicktime\",\n    \"video/x-msvideo\",\n    \"video/x-ms-wmv\",\n    \"video/x-flv\",\n    \"video/webm\",\n    // Hujjat fayllari\n    \"application/pdf\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"text/plain\",\n    \"application/rtf\",\n    // Audio fayllar\n    \"audio/mpeg\",\n    \"audio/wav\",\n    \"audio/aac\",\n    \"audio/ogg\",\n    \"audio/flac\",\n    // Arxiv fayllari\n    \"application/zip\",\n    \"application/x-rar-compressed\",\n    \"application/x-7z-compressed\",\n    \"application/x-tar\",\n    \"application/gzip\"\n];\n// Fayl o'lchamini tekshirish (10MB limit - Supabase uchun)\nconst MAX_FILE_SIZE = 100 * 1024 * 1024; // 10MB\n// Xavfli fayllarni tekshirish\nconst DANGEROUS_EXTENSIONS = [\n    \".exe\",\n    \".bat\",\n    \".cmd\",\n    \".scr\",\n    \".pif\",\n    \".com\",\n    \".js\",\n    \".vbs\",\n    \".jar\"\n];\n// Maksimal fayllar soni\nconst MAX_FILES = 10; // Masalan, 10 tagacha fayl yuklashga ruxsat\nfunction isFileTypeAllowed(filename, mimetype) {\n    const extension = path__WEBPACK_IMPORTED_MODULE_3___default().extname(filename).toLowerCase();\n    // Xavfli fayllarni rad etish\n    if (DANGEROUS_EXTENSIONS.includes(extension)) {\n        return false;\n    }\n    // Ruxsat berilgan kengaytmalarni tekshirish\n    const allAllowedExtensions = Object.values(ALLOWED_FILE_TYPES).flat();\n    const isExtensionAllowed = allAllowedExtensions.includes(extension);\n    // MIME type tekshiruvi\n    const isMimeTypeAllowed = ALLOWED_MIME_TYPES.includes(mimetype);\n    return isExtensionAllowed && isMimeTypeAllowed;\n}\nfunction sanitizeFilename(filename) {\n    // Xavfli belgilarni olib tashlash\n    return filename.replace(/[^a-zA-Z0-9\\-_\\.]/g, \"_\");\n}\n// Supabase bucket yaratish (agar mavjud bo'lmasa)\nasync function ensureBucketExists() {\n    try {\n        const { data: buckets, error } = await supabase.storage.listBuckets();\n        if (error) {\n            console.error(\"Bucket list error:\", error);\n            return false;\n        }\n        const bucketExists = buckets.some((bucket)=>bucket.name === BUCKET_NAME);\n        if (!bucketExists) {\n            const { error: createError } = await supabase.storage.createBucket(BUCKET_NAME, {\n                public: true,\n                allowedMimeTypes: ALLOWED_MIME_TYPES,\n                fileSizeLimit: MAX_FILE_SIZE\n            });\n            if (createError) {\n                console.error(\"Bucket create error:\", createError);\n                return false;\n            }\n            console.log(`Bucket \"${BUCKET_NAME}\" yaratildi`);\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Bucket ensure error:\", error);\n        return false;\n    }\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        // Bucket mavjudligini tekshirish\n        const bucketReady = await ensureBucketExists();\n        if (!bucketReady) {\n            return res.status(500).json({\n                error: \"Storage bucket tayyorlanmadi\"\n            });\n        }\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_0__.IncomingForm({\n            maxFileSize: MAX_FILE_SIZE,\n            maxFiles: MAX_FILES,\n            allowEmptyFiles: false,\n            minFileSize: 1,\n            multiples: true\n        });\n        form.parse(req, async (err, fields, files)=>{\n            if (err) {\n                console.error(\"Form parse error:\", err);\n                if (err.code === \"LIMIT_FILE_SIZE\") {\n                    return res.status(413).json({\n                        error: \"Biror fayl hajmi juda katta (maksimum 10MB)\"\n                    });\n                }\n                if (err.code === \"LIMIT_FILE_COUNT\") {\n                    return res.status(413).json({\n                        error: `Fayllar soni juda ko'p (maksimum ${MAX_FILES} ta)`\n                    });\n                }\n                return res.status(500).json({\n                    error: \"Yuklashda xatolik yuz berdi\"\n                });\n            }\n            let uploadedFiles = files.file;\n            if (!uploadedFiles) {\n                return res.status(400).json({\n                    error: \"Hech qanday fayl yuklanmadi\"\n                });\n            }\n            // Agar bitta fayl bo'lsa, uni massivga aylantirish\n            if (!Array.isArray(uploadedFiles)) {\n                uploadedFiles = [\n                    uploadedFiles\n                ];\n            }\n            // Fayllar sonini tekshirish\n            if (uploadedFiles.length > MAX_FILES) {\n                // Vaqtinchalik fayllarni o'chirish\n                uploadedFiles.forEach((file)=>fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath));\n                return res.status(400).json({\n                    error: `Fayllar soni juda ko'p (maksimum ${MAX_FILES} ta)`\n                });\n            }\n            const results = [];\n            const errors = [];\n            let hasError = false;\n            // Maydonlardan ma'lumotlarni olish (barcha fayllar uchun umumiy)\n            const type = Array.isArray(fields.type) ? fields.type[0] : fields.type;\n            const username = Array.isArray(fields.username) ? fields.username[0] : fields.username;\n            const postIndex = Array.isArray(fields.postIndex) ? fields.postIndex[0] : fields.postIndex;\n            // Har bir faylni qayta ishlash\n            for (const file of uploadedFiles){\n                try {\n                    const originalName = file.originalFilename || \"unknown\";\n                    const mimetype = file.mimetype;\n                    const fileSize = file.size;\n                    // Fayl turini tekshirish\n                    if (!isFileTypeAllowed(originalName, mimetype)) {\n                        fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                        errors.push({\n                            filename: originalName,\n                            error: \"Ushbu fayl turi ruxsat berilmagan\"\n                        });\n                        continue;\n                    }\n                    // Fayl o'lchamini tekshirish\n                    if (fileSize > MAX_FILE_SIZE) {\n                        fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                        errors.push({\n                            filename: originalName,\n                            error: \"Fayl hajmi juda katta (maksimum 10MB)\"\n                        });\n                        continue;\n                    }\n                    // Fayl nomini xavfsiz qilish\n                    const safeOriginalName = sanitizeFilename(originalName);\n                    const fileExtension = path__WEBPACK_IMPORTED_MODULE_3___default().extname(safeOriginalName);\n                    // Noyob fayl nomi yaratish\n                    const timestamp = Date.now();\n                    const randomString = Math.random().toString(36).substring(2, 8);\n                    let fileName;\n                    let folderPath;\n                    if (type === \"profile\") {\n                        folderPath = \"profiles\";\n                        fileName = `${username}_${timestamp}_${randomString}${fileExtension}`;\n                    } else {\n                        folderPath = \"posts\";\n                        fileName = `${username}_${postIndex}_${timestamp}_${randomString}${fileExtension}`;\n                    }\n                    // To'liq fayl yo'li\n                    const filePath = `${folderPath}/${fileName}`;\n                    // Faylni o'qish\n                    const fileBuffer = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(file.filepath);\n                    // Supabase Storage ga yuklash\n                    const { data: uploadData, error: uploadError } = await supabase.storage.from(BUCKET_NAME).upload(filePath, fileBuffer, {\n                        contentType: mimetype,\n                        upsert: false\n                    });\n                    // Vaqtinchalik faylni o'chirish\n                    fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                    if (uploadError) {\n                        console.error(\"Supabase upload error for file\", originalName, \":\", uploadError);\n                        errors.push({\n                            filename: originalName,\n                            error: \"Faylni saqlashda xatolik\"\n                        });\n                        continue;\n                    }\n                    // Public URL olish\n                    const { data: urlData } = supabase.storage.from(BUCKET_NAME).getPublicUrl(filePath);\n                    const publicUrl = urlData.publicUrl;\n                    // Natijani qo'shish\n                    results.push({\n                        success: true,\n                        url: publicUrl,\n                        filename: fileName,\n                        originalName: originalName,\n                        fileSize: fileSize,\n                        mimeType: mimetype,\n                        path: filePath,\n                        bucket: BUCKET_NAME\n                    });\n                } catch (fileError) {\n                    console.error(\"File processing error for\", file.originalFilename, \":\", fileError);\n                    errors.push({\n                        filename: file.originalFilename || \"unknown\",\n                        error: \"Faylni qayta ishlashda xatolik\"\n                    });\n                    // Vaqtinchalik faylni o'chirish (agar mavjud bo'lsa)\n                    if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(file.filepath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(file.filepath);\n                    }\n                }\n            }\n            // Agar xatolar bo'lsa, hasError ni true qilish\n            if (errors.length > 0) {\n                hasError = true;\n            }\n            // Javobni qaytarish\n            res.status(hasError ? 207 : 200).json({\n                success: !hasError,\n                uploaded: results,\n                errors: errors\n            });\n        });\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        res.status(500).json({\n            error: \"Ichki server xatoligi\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxLQUFLYyxnQkFBZ0IsSUFBSTt3QkFDbkMvQyxPQUFPO29CQUNUO29CQUVBLHFEQUFxRDtvQkFDckQsSUFBSXJDLG9EQUFhLENBQUNzRSxLQUFLTSxRQUFRLEdBQUc7d0JBQ2hDNUUsb0RBQWEsQ0FBQ3NFLEtBQUtNLFFBQVE7b0JBQzdCO2dCQUNGO1lBQ0Y7WUFFQSwrQ0FBK0M7WUFDL0MsSUFBSUUsT0FBT0wsTUFBTSxHQUFHLEdBQUc7Z0JBQ3JCTSxXQUFXO1lBQ2I7WUFFQSxvQkFBb0I7WUFDcEIxQixJQUFJRSxNQUFNLENBQUN3QixXQUFXLE1BQU0sS0FBS3ZCLElBQUksQ0FBQztnQkFDcEN3RCxTQUFTLENBQUNqQztnQkFDVnNDLFVBQVV4QztnQkFDVkMsUUFBUUE7WUFDVjtRQUNGO0lBRUYsRUFBRSxPQUFPekMsT0FBTztRQUNkRyxRQUFRSCxLQUFLLENBQUMsaUJBQWlCQTtRQUMvQmdCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRW5CLE9BQU87UUFBd0I7SUFDeEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByaXZhdGUvLi9wYWdlcy9hcGkvdXBsb2FkLmpzPzU1NzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5jb21pbmdGb3JtIH0gZnJvbSAnZm9ybWlkYWJsZSc7XHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcblxyXG4vLyBTdXBhYmFzZSBrb25maWd1cmF0c2l5YXNpXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gXCJodHRwczovL3h6Yndmb2Fjc25ybWdqbWlsZGNyLnN1cGFiYXNlLmNvXCI7XHJcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IFwiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW5oNlluZG1iMkZqYzI1eWJXZHFiV2xzWkdOeUlpd2ljbTlzWlNJNkluTmxjblpwWTJWZmNtOXNaU0lzSW1saGRDSTZNVGMxT0RFNU9URTNOU3dpWlhod0lqb3lNRGN6TnpjMU1UYzFmUS50MHU4VXk3RDdOM0tXZ050aEZUaWpoQ3VjTjRWY0ZjMzlRQVBBd0RZWGZvXCI7IC8vIFNlcnZpY2Ugcm9sZSBrZXkgaXNobGF0aXNoIGtlcmFrXHJcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpO1xyXG5cclxuLy8gQnVja2V0IG5vbWlcclxuY29uc3QgQlVDS0VUX05BTUUgPSAndXBsb2Fkcyc7IC8vIFN1cGFiYXNlIGRhIGJ1Y2tldCB5YXJhdGlzaCBrZXJha1xyXG5cclxuLy8gUnV4c2F0IGJlcmlsZ2FuIGZpbGUgdHVybGFyaVxyXG5jb25zdCBBTExPV0VEX0ZJTEVfVFlQRVMgPSB7XHJcbiAgaW1hZ2VzOiBbJy5qcGcnLCAnLmpwZWcnLCAnLnBuZycsICcuZ2lmJywgJy53ZWJwJywgJy5zdmcnLCAnLmJtcCcsICcudGlmZiddLFxyXG4gIHZpZGVvczogWycubXA0JywgJy5hdmknLCAnLm1rdicsICcubW92JywgJy53bXYnLCAnLmZsdicsICcud2VibScsICcubTR2J10sXHJcbiAgZG9jdW1lbnRzOiBbJy5wZGYnLCAnLmRvYycsICcuZG9jeCcsICcudHh0JywgJy5ydGYnXSxcclxuICBhdWRpbzogWycubXAzJywgJy53YXYnLCAnLmFhYycsICcub2dnJywgJy5mbGFjJ10sXHJcbiAgYXJjaGl2ZXM6IFsnLnppcCcsICcucmFyJywgJy43eicsICcudGFyJywgJy5neiddXHJcbn07XHJcblxyXG4vLyBNSU1FIHR5cGUgdGVrc2hpcnV2aVxyXG5jb25zdCBBTExPV0VEX01JTUVfVFlQRVMgPSBbXHJcbiAgLy8gUmFzbSBmYXlsbGFyaVxyXG4gICdpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9naWYnLCAnaW1hZ2Uvd2VicCcsICdpbWFnZS9zdmcreG1sJywgXHJcbiAgJ2ltYWdlL2JtcCcsICdpbWFnZS90aWZmJyxcclxuICBcclxuICAvLyBWaWRlbyBmYXlsbGFyXHJcbiAgJ3ZpZGVvL21wNCcsICd2aWRlby9hdmknLCAndmlkZW8vcXVpY2t0aW1lJywgJ3ZpZGVvL3gtbXN2aWRlbycsXHJcbiAgJ3ZpZGVvL3gtbXMtd212JywgJ3ZpZGVvL3gtZmx2JywgJ3ZpZGVvL3dlYm0nLFxyXG4gIFxyXG4gIC8vIEh1amphdCBmYXlsbGFyaVxyXG4gICdhcHBsaWNhdGlvbi9wZGYnLCAnYXBwbGljYXRpb24vbXN3b3JkJywgXHJcbiAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyxcclxuICAndGV4dC9wbGFpbicsICdhcHBsaWNhdGlvbi9ydGYnLFxyXG4gIFxyXG4gIC8vIEF1ZGlvIGZheWxsYXJcclxuICAnYXVkaW8vbXBlZycsICdhdWRpby93YXYnLCAnYXVkaW8vYWFjJywgJ2F1ZGlvL29nZycsICdhdWRpby9mbGFjJyxcclxuICBcclxuICAvLyBBcnhpdiBmYXlsbGFyaVxyXG4gICdhcHBsaWNhdGlvbi96aXAnLCAnYXBwbGljYXRpb24veC1yYXItY29tcHJlc3NlZCcsICdhcHBsaWNhdGlvbi94LTd6LWNvbXByZXNzZWQnLFxyXG4gICdhcHBsaWNhdGlvbi94LXRhcicsICdhcHBsaWNhdGlvbi9nemlwJ1xyXG5dO1xyXG5cclxuLy8gRmF5bCBvJ2xjaGFtaW5pIHRla3NoaXJpc2ggKDEwTUIgbGltaXQgLSBTdXBhYmFzZSB1Y2h1bilcclxuY29uc3QgTUFYX0ZJTEVfU0laRSA9IDEwMCAqIDEwMjQgKiAxMDI0OyAvLyAxME1CXHJcblxyXG4vLyBYYXZmbGkgZmF5bGxhcm5pIHRla3NoaXJpc2hcclxuY29uc3QgREFOR0VST1VTX0VYVEVOU0lPTlMgPSBbJy5leGUnLCAnLmJhdCcsICcuY21kJywgJy5zY3InLCAnLnBpZicsICcuY29tJywgJy5qcycsICcudmJzJywgJy5qYXInXTtcclxuXHJcbi8vIE1ha3NpbWFsIGZheWxsYXIgc29uaVxyXG5jb25zdCBNQVhfRklMRVMgPSAxMDsgLy8gTWFzYWxhbiwgMTAgdGFnYWNoYSBmYXlsIHl1a2xhc2hnYSBydXhzYXRcclxuXHJcbmZ1bmN0aW9uIGlzRmlsZVR5cGVBbGxvd2VkKGZpbGVuYW1lLCBtaW1ldHlwZSkge1xyXG4gIGNvbnN0IGV4dGVuc2lvbiA9IHBhdGguZXh0bmFtZShmaWxlbmFtZSkudG9Mb3dlckNhc2UoKTtcclxuICBcclxuICAvLyBYYXZmbGkgZmF5bGxhcm5pIHJhZCBldGlzaFxyXG4gIGlmIChEQU5HRVJPVVNfRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24pKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFJ1eHNhdCBiZXJpbGdhbiBrZW5nYXl0bWFsYXJuaSB0ZWtzaGlyaXNoXHJcbiAgY29uc3QgYWxsQWxsb3dlZEV4dGVuc2lvbnMgPSBPYmplY3QudmFsdWVzKEFMTE9XRURfRklMRV9UWVBFUykuZmxhdCgpO1xyXG4gIGNvbnN0IGlzRXh0ZW5zaW9uQWxsb3dlZCA9IGFsbEFsbG93ZWRFeHRlbnNpb25zLmluY2x1ZGVzKGV4dGVuc2lvbik7XHJcbiAgXHJcbiAgLy8gTUlNRSB0eXBlIHRla3NoaXJ1dmlcclxuICBjb25zdCBpc01pbWVUeXBlQWxsb3dlZCA9IEFMTE9XRURfTUlNRV9UWVBFUy5pbmNsdWRlcyhtaW1ldHlwZSk7XHJcbiAgXHJcbiAgcmV0dXJuIGlzRXh0ZW5zaW9uQWxsb3dlZCAmJiBpc01pbWVUeXBlQWxsb3dlZDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2FuaXRpemVGaWxlbmFtZShmaWxlbmFtZSkge1xyXG4gIC8vIFhhdmZsaSBiZWxnaWxhcm5pIG9saWIgdGFzaGxhc2hcclxuICByZXR1cm4gZmlsZW5hbWUucmVwbGFjZSgvW15hLXpBLVowLTlcXC1fXFwuXS9nLCAnXycpO1xyXG59XHJcblxyXG4vLyBTdXBhYmFzZSBidWNrZXQgeWFyYXRpc2ggKGFnYXIgbWF2anVkIGJvJ2xtYXNhKVxyXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVCdWNrZXRFeGlzdHMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YTogYnVja2V0cywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UubGlzdEJ1Y2tldHMoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0J1Y2tldCBsaXN0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBidWNrZXRFeGlzdHMgPSBidWNrZXRzLnNvbWUoYnVja2V0ID0+IGJ1Y2tldC5uYW1lID09PSBCVUNLRVRfTkFNRSk7XHJcbiAgICBcclxuICAgIGlmICghYnVja2V0RXhpc3RzKSB7XHJcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGNyZWF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlLmNyZWF0ZUJ1Y2tldChCVUNLRVRfTkFNRSwge1xyXG4gICAgICAgIHB1YmxpYzogdHJ1ZSwgLy8gUHVibGljIHFpbGlzaCB1Y2h1blxyXG4gICAgICAgIGFsbG93ZWRNaW1lVHlwZXM6IEFMTE9XRURfTUlNRV9UWVBFUyxcclxuICAgICAgICBmaWxlU2l6ZUxpbWl0OiBNQVhfRklMRV9TSVpFXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgaWYgKGNyZWF0ZUVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQnVja2V0IGNyZWF0ZSBlcnJvcjonLCBjcmVhdGVFcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgQnVja2V0IFwiJHtCVUNLRVRfTkFNRX1cIiB5YXJhdGlsZGlgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0J1Y2tldCBlbnN1cmUgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBCdWNrZXQgbWF2anVkbGlnaW5pIHRla3NoaXJpc2hcclxuICAgIGNvbnN0IGJ1Y2tldFJlYWR5ID0gYXdhaXQgZW5zdXJlQnVja2V0RXhpc3RzKCk7XHJcbiAgICBpZiAoIWJ1Y2tldFJlYWR5KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnU3RvcmFnZSBidWNrZXQgdGF5eW9ybGFubWFkaScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBJbmNvbWluZ0Zvcm0oe1xyXG4gICAgICBtYXhGaWxlU2l6ZTogTUFYX0ZJTEVfU0laRSxcclxuICAgICAgbWF4RmlsZXM6IE1BWF9GSUxFUyxcclxuICAgICAgYWxsb3dFbXB0eUZpbGVzOiBmYWxzZSxcclxuICAgICAgbWluRmlsZVNpemU6IDEsXHJcbiAgICAgIG11bHRpcGxlczogdHJ1ZSwgLy8gS28ncCBmYXlsIHl1a2xhc2huaSB5b3Fpc2hcclxuICAgIH0pO1xyXG5cclxuICAgIGZvcm0ucGFyc2UocmVxLCBhc3luYyAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGb3JtIHBhcnNlIGVycm9yOicsIGVycik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGVyci5jb2RlID09PSAnTElNSVRfRklMRV9TSVpFJykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDEzKS5qc29uKHsgXHJcbiAgICAgICAgICAgIGVycm9yOiAnQmlyb3IgZmF5bCBoYWptaSBqdWRhIGthdHRhIChtYWtzaW11bSAxME1CKScgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGVyci5jb2RlID09PSAnTElNSVRfRklMRV9DT1VOVCcpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQxMykuanNvbih7IFxyXG4gICAgICAgICAgICBlcnJvcjogYEZheWxsYXIgc29uaSBqdWRhIGtvJ3AgKG1ha3NpbXVtICR7TUFYX0ZJTEVTfSB0YSlgIFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnWXVrbGFzaGRhIHhhdG9saWsgeXV6IGJlcmRpJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHVwbG9hZGVkRmlsZXMgPSBmaWxlcy5maWxlO1xyXG4gICAgICBpZiAoIXVwbG9hZGVkRmlsZXMpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0hlY2ggcWFuZGF5IGZheWwgeXVrbGFubWFkaScgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFnYXIgYml0dGEgZmF5bCBibydsc2EsIHVuaSBtYXNzaXZnYSBheWxhbnRpcmlzaFxyXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodXBsb2FkZWRGaWxlcykpIHtcclxuICAgICAgICB1cGxvYWRlZEZpbGVzID0gW3VwbG9hZGVkRmlsZXNdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGYXlsbGFyIHNvbmluaSB0ZWtzaGlyaXNoXHJcbiAgICAgIGlmICh1cGxvYWRlZEZpbGVzLmxlbmd0aCA+IE1BWF9GSUxFUykge1xyXG4gICAgICAgIC8vIFZhcXRpbmNoYWxpayBmYXlsbGFybmkgbydjaGlyaXNoXHJcbiAgICAgICAgdXBsb2FkZWRGaWxlcy5mb3JFYWNoKGZpbGUgPT4gZnMudW5saW5rU3luYyhmaWxlLmZpbGVwYXRoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXHJcbiAgICAgICAgICBlcnJvcjogYEZheWxsYXIgc29uaSBqdWRhIGtvJ3AgKG1ha3NpbXVtICR7TUFYX0ZJTEVTfSB0YSlgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZXN1bHRzID0gW107XHJcbiAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xyXG4gICAgICBsZXQgaGFzRXJyb3IgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIE1heWRvbmxhcmRhbiBtYSdsdW1vdGxhcm5pIG9saXNoIChiYXJjaGEgZmF5bGxhciB1Y2h1biB1bXVtaXkpXHJcbiAgICAgIGNvbnN0IHR5cGUgPSBBcnJheS5pc0FycmF5KGZpZWxkcy50eXBlKSA/IGZpZWxkcy50eXBlWzBdIDogZmllbGRzLnR5cGU7XHJcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gQXJyYXkuaXNBcnJheShmaWVsZHMudXNlcm5hbWUpID8gZmllbGRzLnVzZXJuYW1lWzBdIDogZmllbGRzLnVzZXJuYW1lO1xyXG4gICAgICBjb25zdCBwb3N0SW5kZXggPSBBcnJheS5pc0FycmF5KGZpZWxkcy5wb3N0SW5kZXgpID8gZmllbGRzLnBvc3RJbmRleFswXSA6IGZpZWxkcy5wb3N0SW5kZXg7XHJcblxyXG4gICAgICAvLyBIYXIgYmlyIGZheWxuaSBxYXl0YSBpc2hsYXNoXHJcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiB1cGxvYWRlZEZpbGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGZpbGUub3JpZ2luYWxGaWxlbmFtZSB8fCAndW5rbm93bic7XHJcbiAgICAgICAgICBjb25zdCBtaW1ldHlwZSA9IGZpbGUubWltZXR5cGU7XHJcbiAgICAgICAgICBjb25zdCBmaWxlU2l6ZSA9IGZpbGUuc2l6ZTtcclxuXHJcbiAgICAgICAgICAvLyBGYXlsIHR1cmluaSB0ZWtzaGlyaXNoXHJcbiAgICAgICAgICBpZiAoIWlzRmlsZVR5cGVBbGxvd2VkKG9yaWdpbmFsTmFtZSwgbWltZXR5cGUpKSB7XHJcbiAgICAgICAgICAgIGZzLnVubGlua1N5bmMoZmlsZS5maWxlcGF0aCk7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHsgXHJcbiAgICAgICAgICAgICAgZmlsZW5hbWU6IG9yaWdpbmFsTmFtZSwgXHJcbiAgICAgICAgICAgICAgZXJyb3I6ICdVc2hidSBmYXlsIHR1cmkgcnV4c2F0IGJlcmlsbWFnYW4nIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gRmF5bCBvJ2xjaGFtaW5pIHRla3NoaXJpc2hcclxuICAgICAgICAgIGlmIChmaWxlU2l6ZSA+IE1BWF9GSUxFX1NJWkUpIHtcclxuICAgICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlLmZpbGVwYXRoKTtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goeyBcclxuICAgICAgICAgICAgICBmaWxlbmFtZTogb3JpZ2luYWxOYW1lLCBcclxuICAgICAgICAgICAgICBlcnJvcjogJ0ZheWwgaGFqbWkganVkYSBrYXR0YSAobWFrc2ltdW0gMTBNQiknIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gRmF5bCBub21pbmkgeGF2ZnNpeiBxaWxpc2hcclxuICAgICAgICAgIGNvbnN0IHNhZmVPcmlnaW5hbE5hbWUgPSBzYW5pdGl6ZUZpbGVuYW1lKG9yaWdpbmFsTmFtZSk7XHJcbiAgICAgICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gcGF0aC5leHRuYW1lKHNhZmVPcmlnaW5hbE5hbWUpO1xyXG5cclxuICAgICAgICAgIC8vIE5veW9iIGZheWwgbm9taSB5YXJhdGlzaFxyXG4gICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgIGNvbnN0IHJhbmRvbVN0cmluZyA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgbGV0IGZpbGVOYW1lO1xyXG4gICAgICAgICAgbGV0IGZvbGRlclBhdGg7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmICh0eXBlID09PSAncHJvZmlsZScpIHtcclxuICAgICAgICAgICAgZm9sZGVyUGF0aCA9ICdwcm9maWxlcyc7XHJcbiAgICAgICAgICAgIGZpbGVOYW1lID0gYCR7dXNlcm5hbWV9XyR7dGltZXN0YW1wfV8ke3JhbmRvbVN0cmluZ30ke2ZpbGVFeHRlbnNpb259YDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvbGRlclBhdGggPSAncG9zdHMnO1xyXG4gICAgICAgICAgICBmaWxlTmFtZSA9IGAke3VzZXJuYW1lfV8ke3Bvc3RJbmRleH1fJHt0aW1lc3RhbXB9XyR7cmFuZG9tU3RyaW5nfSR7ZmlsZUV4dGVuc2lvbn1gO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFRvJ2xpcSBmYXlsIHlvJ2xpXHJcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcclxuXHJcbiAgICAgICAgICAvLyBGYXlsbmkgbydxaXNoXHJcbiAgICAgICAgICBjb25zdCBmaWxlQnVmZmVyID0gZnMucmVhZEZpbGVTeW5jKGZpbGUuZmlsZXBhdGgpO1xyXG5cclxuICAgICAgICAgIC8vIFN1cGFiYXNlIFN0b3JhZ2UgZ2EgeXVrbGFzaFxyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiB1cGxvYWREYXRhLCBlcnJvcjogdXBsb2FkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgICAgICAgLmZyb20oQlVDS0VUX05BTUUpXHJcbiAgICAgICAgICAgIC51cGxvYWQoZmlsZVBhdGgsIGZpbGVCdWZmZXIsIHtcclxuICAgICAgICAgICAgICBjb250ZW50VHlwZTogbWltZXR5cGUsXHJcbiAgICAgICAgICAgICAgdXBzZXJ0OiBmYWxzZSwgLy8gTWF2anVkIGZheWxuaSBxYXl0YSB5b3ptYXNsaWtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gVmFxdGluY2hhbGlrIGZheWxuaSBvJ2NoaXJpc2hcclxuICAgICAgICAgIGZzLnVubGlua1N5bmMoZmlsZS5maWxlcGF0aCk7XHJcblxyXG4gICAgICAgICAgaWYgKHVwbG9hZEVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIHVwbG9hZCBlcnJvciBmb3IgZmlsZScsIG9yaWdpbmFsTmFtZSwgJzonLCB1cGxvYWRFcnJvcik7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHsgXHJcbiAgICAgICAgICAgICAgZmlsZW5hbWU6IG9yaWdpbmFsTmFtZSwgXHJcbiAgICAgICAgICAgICAgZXJyb3I6ICdGYXlsbmkgc2FxbGFzaGRhIHhhdG9saWsnIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gUHVibGljIFVSTCBvbGlzaFxyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiB1cmxEYXRhIH0gPSBzdXBhYmFzZS5zdG9yYWdlXHJcbiAgICAgICAgICAgIC5mcm9tKEJVQ0tFVF9OQU1FKVxyXG4gICAgICAgICAgICAuZ2V0UHVibGljVXJsKGZpbGVQYXRoKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBwdWJsaWNVcmwgPSB1cmxEYXRhLnB1YmxpY1VybDtcclxuXHJcbiAgICAgICAgICAvLyBOYXRpamFuaSBxbydzaGlzaFxyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgdXJsOiBwdWJsaWNVcmwsXHJcbiAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlTmFtZSxcclxuICAgICAgICAgICAgb3JpZ2luYWxOYW1lOiBvcmlnaW5hbE5hbWUsXHJcbiAgICAgICAgICAgIGZpbGVTaXplOiBmaWxlU2l6ZSxcclxuICAgICAgICAgICAgbWltZVR5cGU6IG1pbWV0eXBlLFxyXG4gICAgICAgICAgICBwYXRoOiBmaWxlUGF0aCxcclxuICAgICAgICAgICAgYnVja2V0OiBCVUNLRVRfTkFNRVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGZpbGVFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmlsZSBwcm9jZXNzaW5nIGVycm9yIGZvcicsIGZpbGUub3JpZ2luYWxGaWxlbmFtZSwgJzonLCBmaWxlRXJyb3IpO1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goeyBcclxuICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGUub3JpZ2luYWxGaWxlbmFtZSB8fCAndW5rbm93bicsIFxyXG4gICAgICAgICAgICBlcnJvcjogJ0ZheWxuaSBxYXl0YSBpc2hsYXNoZGEgeGF0b2xpaycgXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBWYXF0aW5jaGFsaWsgZmF5bG5pIG8nY2hpcmlzaCAoYWdhciBtYXZqdWQgYm8nbHNhKVxyXG4gICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZS5maWxlcGF0aCkpIHtcclxuICAgICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlLmZpbGVwYXRoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFnYXIgeGF0b2xhciBibydsc2EsIGhhc0Vycm9yIG5pIHRydWUgcWlsaXNoXHJcbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGhhc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSmF2b2JuaSBxYXl0YXJpc2hcclxuICAgICAgcmVzLnN0YXR1cyhoYXNFcnJvciA/IDIwNyA6IDIwMCkuanNvbih7IFxyXG4gICAgICAgIHN1Y2Nlc3M6ICFoYXNFcnJvcixcclxuICAgICAgICB1cGxvYWRlZDogcmVzdWx0cyxcclxuICAgICAgICBlcnJvcnM6IGVycm9yc1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignVXBsb2FkIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJY2hraSBzZXJ2ZXIgeGF0b2xpZ2knIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJJbmNvbWluZ0Zvcm0iLCJjcmVhdGVDbGllbnQiLCJmcyIsInBhdGgiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwic3VwYWJhc2VVcmwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJzdXBhYmFzZSIsIkJVQ0tFVF9OQU1FIiwiQUxMT1dFRF9GSUxFX1RZUEVTIiwiaW1hZ2VzIiwidmlkZW9zIiwiZG9jdW1lbnRzIiwiYXVkaW8iLCJhcmNoaXZlcyIsIkFMTE9XRURfTUlNRV9UWVBFUyIsIk1BWF9GSUxFX1NJWkUiLCJEQU5HRVJPVVNfRVhURU5TSU9OUyIsIk1BWF9GSUxFUyIsImlzRmlsZVR5cGVBbGxvd2VkIiwiZmlsZW5hbWUiLCJtaW1ldHlwZSIsImV4dGVuc2lvbiIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYWxsQWxsb3dlZEV4dGVuc2lvbnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmbGF0IiwiaXNFeHRlbnNpb25BbGxvd2VkIiwiaXNNaW1lVHlwZUFsbG93ZWQiLCJzYW5pdGl6ZUZpbGVuYW1lIiwicmVwbGFjZSIsImVuc3VyZUJ1Y2tldEV4aXN0cyIsImRhdGEiLCJidWNrZXRzIiwiZXJyb3IiLCJzdG9yYWdlIiwibGlzdEJ1Y2tldHMiLCJjb25zb2xlIiwiYnVja2V0RXhpc3RzIiwic29tZSIsImJ1Y2tldCIsIm5hbWUiLCJjcmVhdGVFcnJvciIsImNyZWF0ZUJ1Y2tldCIsInB1YmxpYyIsImFsbG93ZWRNaW1lVHlwZXMiLCJmaWxlU2l6ZUxpbWl0IiwibG9nIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJidWNrZXRSZWFkeSIsImZvcm0iLCJtYXhGaWxlU2l6ZSIsIm1heEZpbGVzIiwiYWxsb3dFbXB0eUZpbGVzIiwibWluRmlsZVNpemUiLCJtdWx0aXBsZXMiLCJwYXJzZSIsImVyciIsImZpZWxkcyIsImZpbGVzIiwiY29kZSIsInVwbG9hZGVkRmlsZXMiLCJmaWxlIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiZm9yRWFjaCIsInVubGlua1N5bmMiLCJmaWxlcGF0aCIsInJlc3VsdHMiLCJlcnJvcnMiLCJoYXNFcnJvciIsInR5cGUiLCJ1c2VybmFtZSIsInBvc3RJbmRleCIsIm9yaWdpbmFsTmFtZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJmaWxlU2l6ZSIsInNpemUiLCJwdXNoIiwic2FmZU9yaWdpbmFsTmFtZSIsImZpbGVFeHRlbnNpb24iLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicmFuZG9tU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZmlsZU5hbWUiLCJmb2xkZXJQYXRoIiwiZmlsZVBhdGgiLCJmaWxlQnVmZmVyIiwicmVhZEZpbGVTeW5jIiwidXBsb2FkRGF0YSIsInVwbG9hZEVycm9yIiwiZnJvbSIsInVwbG9hZCIsImNvbnRlbnRUeXBlIiwidXBzZXJ0IiwidXJsRGF0YSIsImdldFB1YmxpY1VybCIsInB1YmxpY1VybCIsInN1Y2Nlc3MiLCJ1cmwiLCJtaW1lVHlwZSIsImZpbGVFcnJvciIsImV4aXN0c1N5bmMiLCJ1cGxvYWRlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();