"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload";
exports.ids = ["pages/api/upload"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload.js */ \"(api)/./pages/api/upload.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload\",\n        pathname: \"/api/upload\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXBsb2FkLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpdmF0ZS8/YjNmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVwbG9hZC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/upload.js":
/*!*****************************!*\
  !*** ./pages/api/upload.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Ruxsat berilgan file turlari\nconst ALLOWED_FILE_TYPES = {\n    images: [\n        \".jpg\",\n        \".jpeg\",\n        \".png\",\n        \".gif\",\n        \".webp\",\n        \".svg\",\n        \".bmp\",\n        \".tiff\"\n    ],\n    videos: [\n        \".mp4\",\n        \".avi\",\n        \".mkv\",\n        \".mov\",\n        \".wmv\",\n        \".flv\",\n        \".webm\",\n        \".m4v\"\n    ],\n    documents: [\n        \".pdf\",\n        \".doc\",\n        \".docx\",\n        \".txt\",\n        \".rtf\"\n    ],\n    audio: [\n        \".mp3\",\n        \".wav\",\n        \".aac\",\n        \".ogg\",\n        \".flac\"\n    ],\n    archives: [\n        \".zip\",\n        \".rar\",\n        \".7z\",\n        \".tar\",\n        \".gz\"\n    ]\n};\n// MIME type tekshiruvi\nconst ALLOWED_MIME_TYPES = [\n    // Rasm fayllari\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/webp\",\n    \"image/svg+xml\",\n    \"image/bmp\",\n    \"image/tiff\",\n    // Video fayllar\n    \"video/mp4\",\n    \"video/avi\",\n    \"video/quicktime\",\n    \"video/x-msvideo\",\n    \"video/x-ms-wmv\",\n    \"video/x-flv\",\n    \"video/webm\",\n    // Hujjat fayllari\n    \"application/pdf\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"text/plain\",\n    \"application/rtf\",\n    // Audio fayllar\n    \"audio/mpeg\",\n    \"audio/wav\",\n    \"audio/aac\",\n    \"audio/ogg\",\n    \"audio/flac\",\n    // Arxiv fayllari\n    \"application/zip\",\n    \"application/x-rar-compressed\",\n    \"application/x-7z-compressed\",\n    \"application/x-tar\",\n    \"application/gzip\"\n];\n// Fayl o'lchamini tekshirish (50MB limit)\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\n// Xavfli fayllarni tekshirish\nconst DANGEROUS_EXTENSIONS = [\n    \".exe\",\n    \".bat\",\n    \".cmd\",\n    \".scr\",\n    \".pif\",\n    \".com\",\n    \".js\",\n    \".vbs\",\n    \".jar\"\n];\nfunction isFileTypeAllowed(filename, mimetype) {\n    const extension = path__WEBPACK_IMPORTED_MODULE_2___default().extname(filename).toLowerCase();\n    // Xavfli fayllarni rad etish\n    if (DANGEROUS_EXTENSIONS.includes(extension)) {\n        return false;\n    }\n    // Ruxsat berilgan kengaytmalarni tekshirish\n    const allAllowedExtensions = Object.values(ALLOWED_FILE_TYPES).flat();\n    const isExtensionAllowed = allAllowedExtensions.includes(extension);\n    // MIME type tekshiruvi\n    const isMimeTypeAllowed = ALLOWED_MIME_TYPES.includes(mimetype);\n    return isExtensionAllowed && isMimeTypeAllowed;\n}\nfunction sanitizeFilename(filename) {\n    // Xavfli belgilarni olib tashlash\n    return filename.replace(/[^a-zA-Z0-9\\-_\\.]/g, \"_\");\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_0__.IncomingForm({\n            maxFileSize: MAX_FILE_SIZE,\n            maxFiles: 5,\n            allowEmptyFiles: false,\n            minFileSize: 1\n        });\n        const uploadDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"public\", \"assets\");\n        // Assets papkasini yaratish\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(uploadDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(uploadDir, {\n                recursive: true\n            });\n        }\n        form.parse(req, (err, fields, files)=>{\n            if (err) {\n                console.error(\"Form parse error:\", err);\n                // Xatolik turini aniqlash\n                if (err.code === \"LIMIT_FILE_SIZE\") {\n                    return res.status(413).json({\n                        error: \"Fayl hajmi juda katta (maksimum 50MB)\"\n                    });\n                }\n                return res.status(500).json({\n                    error: \"Yuklashda xatolik yuz berdi\"\n                });\n            }\n            const file = files.file;\n            if (!file) {\n                return res.status(400).json({\n                    error: \"Hech qanday fayl yuklanmadi\"\n                });\n            }\n            // Fayl massivdan birinchisini olish\n            const fileArray = Array.isArray(file) ? file[0] : file;\n            const originalName = fileArray.originalFilename || \"unknown\";\n            const mimetype = fileArray.mimetype;\n            const fileSize = fileArray.size;\n            // Fayl turini tekshirish\n            if (!isFileTypeAllowed(originalName, mimetype)) {\n                // Vaqtinchalik faylni o'chirish\n                fs__WEBPACK_IMPORTED_MODULE_1___default().unlinkSync(fileArray.filepath);\n                return res.status(400).json({\n                    error: \"Ushbu fayl turi ruxsat berilmagan\",\n                    allowedTypes: \"Rasm, video, hujjat, audio va arxiv fayllari\"\n                });\n            }\n            // Fayl o'lchamini qo'shimcha tekshirish\n            if (fileSize > MAX_FILE_SIZE) {\n                fs__WEBPACK_IMPORTED_MODULE_1___default().unlinkSync(fileArray.filepath);\n                return res.status(413).json({\n                    error: \"Fayl hajmi juda katta (maksimum 50MB)\"\n                });\n            }\n            // Maydonlardan ma'lumotlarni olish\n            const type = Array.isArray(fields.type) ? fields.type[0] : fields.type;\n            const username = Array.isArray(fields.username) ? fields.username[0] : fields.username;\n            const postIndex = Array.isArray(fields.postIndex) ? fields.postIndex[0] : fields.postIndex;\n            // Fayl nomini xavfsiz qilish\n            const safeOriginalName = sanitizeFilename(originalName);\n            const fileExtension = path__WEBPACK_IMPORTED_MODULE_2___default().extname(safeOriginalName);\n            const baseName = path__WEBPACK_IMPORTED_MODULE_2___default().basename(safeOriginalName, fileExtension);\n            // Noyob fayl nomi yaratish\n            const timestamp = Date.now();\n            const randomString = Math.random().toString(36).substring(2, 8);\n            let fileName;\n            if (type === \"profile\") {\n                fileName = `profile_${username}_${timestamp}_${randomString}${fileExtension}`;\n            } else {\n                fileName = `post_${username}_${postIndex}_${timestamp}_${randomString}${fileExtension}`;\n            }\n            const newPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(uploadDir, fileName);\n            // Faylni ko'chirish\n            fs__WEBPACK_IMPORTED_MODULE_1___default().rename(fileArray.filepath, newPath, (err)=>{\n                if (err) {\n                    console.error(\"File move error:\", err);\n                    return res.status(500).json({\n                        error: \"Faylni saqlashda xatolik\"\n                    });\n                }\n                // Fayl ruxsatlarini o'rnatish (ixtiyoriy)\n                fs__WEBPACK_IMPORTED_MODULE_1___default().chmod(newPath, 420, (chmodErr)=>{\n                    if (chmodErr) {\n                        console.warn(\"Chmod warning:\", chmodErr);\n                    }\n                });\n                // Javobni qaytarish\n                const publicUrl = `/assets/${fileName}`;\n                res.status(200).json({\n                    success: true,\n                    url: publicUrl,\n                    filename: fileName,\n                    originalName: originalName,\n                    fileSize: fileSize,\n                    mimeType: mimetype\n                });\n            });\n        });\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        res.status(500).json({\n            error: \"Ichki server xatoligi\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFvQjtnQkFDcEIsTUFBTUUsWUFBWSxDQUFDLFFBQVEsRUFBRU4sU0FBUyxDQUFDO2dCQUN2Q2pELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQ25CcUQsU0FBUztvQkFDVEMsS0FBS0Y7b0JBQ0x2RSxVQUFVaUU7b0JBQ1Z0QixjQUFjQTtvQkFDZEUsVUFBVUE7b0JBQ1Y2QixVQUFVekU7Z0JBQ1o7WUFDRjtRQUNGO0lBRUYsRUFBRSxPQUFPbUIsT0FBTztRQUNkaUIsUUFBUWpCLEtBQUssQ0FBQyxpQkFBaUJBO1FBQy9CSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDeEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByaXZhdGUvLi9wYWdlcy9hcGkvdXBsb2FkLmpzPzU1NzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5jb21pbmdGb3JtIH0gZnJvbSAnZm9ybWlkYWJsZSc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcblxyXG4vLyBSdXhzYXQgYmVyaWxnYW4gZmlsZSB0dXJsYXJpXHJcbmNvbnN0IEFMTE9XRURfRklMRV9UWVBFUyA9IHtcclxuICBpbWFnZXM6IFsnLmpwZycsICcuanBlZycsICcucG5nJywgJy5naWYnLCAnLndlYnAnLCAnLnN2ZycsICcuYm1wJywgJy50aWZmJ10sXHJcbiAgdmlkZW9zOiBbJy5tcDQnLCAnLmF2aScsICcubWt2JywgJy5tb3YnLCAnLndtdicsICcuZmx2JywgJy53ZWJtJywgJy5tNHYnXSxcclxuICBkb2N1bWVudHM6IFsnLnBkZicsICcuZG9jJywgJy5kb2N4JywgJy50eHQnLCAnLnJ0ZiddLFxyXG4gIGF1ZGlvOiBbJy5tcDMnLCAnLndhdicsICcuYWFjJywgJy5vZ2cnLCAnLmZsYWMnXSxcclxuICBhcmNoaXZlczogWycuemlwJywgJy5yYXInLCAnLjd6JywgJy50YXInLCAnLmd6J11cclxufTtcclxuXHJcbi8vIE1JTUUgdHlwZSB0ZWtzaGlydXZpXHJcbmNvbnN0IEFMTE9XRURfTUlNRV9UWVBFUyA9IFtcclxuICAvLyBSYXNtIGZheWxsYXJpXHJcbiAgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL2dpZicsICdpbWFnZS93ZWJwJywgJ2ltYWdlL3N2Zyt4bWwnLCBcclxuICAnaW1hZ2UvYm1wJywgJ2ltYWdlL3RpZmYnLFxyXG4gIFxyXG4gIC8vIFZpZGVvIGZheWxsYXJcclxuICAndmlkZW8vbXA0JywgJ3ZpZGVvL2F2aScsICd2aWRlby9xdWlja3RpbWUnLCAndmlkZW8veC1tc3ZpZGVvJyxcclxuICAndmlkZW8veC1tcy13bXYnLCAndmlkZW8veC1mbHYnLCAndmlkZW8vd2VibScsXHJcbiAgXHJcbiAgLy8gSHVqamF0IGZheWxsYXJpXHJcbiAgJ2FwcGxpY2F0aW9uL3BkZicsICdhcHBsaWNhdGlvbi9tc3dvcmQnLCBcclxuICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxyXG4gICd0ZXh0L3BsYWluJywgJ2FwcGxpY2F0aW9uL3J0ZicsXHJcbiAgXHJcbiAgLy8gQXVkaW8gZmF5bGxhclxyXG4gICdhdWRpby9tcGVnJywgJ2F1ZGlvL3dhdicsICdhdWRpby9hYWMnLCAnYXVkaW8vb2dnJywgJ2F1ZGlvL2ZsYWMnLFxyXG4gIFxyXG4gIC8vIEFyeGl2IGZheWxsYXJpXHJcbiAgJ2FwcGxpY2F0aW9uL3ppcCcsICdhcHBsaWNhdGlvbi94LXJhci1jb21wcmVzc2VkJywgJ2FwcGxpY2F0aW9uL3gtN3otY29tcHJlc3NlZCcsXHJcbiAgJ2FwcGxpY2F0aW9uL3gtdGFyJywgJ2FwcGxpY2F0aW9uL2d6aXAnXHJcbl07XHJcblxyXG4vLyBGYXlsIG8nbGNoYW1pbmkgdGVrc2hpcmlzaCAoNTBNQiBsaW1pdClcclxuY29uc3QgTUFYX0ZJTEVfU0laRSA9IDUwICogMTAyNCAqIDEwMjQ7IC8vIDUwTUJcclxuXHJcbi8vIFhhdmZsaSBmYXlsbGFybmkgdGVrc2hpcmlzaFxyXG5jb25zdCBEQU5HRVJPVVNfRVhURU5TSU9OUyA9IFsnLmV4ZScsICcuYmF0JywgJy5jbWQnLCAnLnNjcicsICcucGlmJywgJy5jb20nLCAnLmpzJywgJy52YnMnLCAnLmphciddO1xyXG5cclxuZnVuY3Rpb24gaXNGaWxlVHlwZUFsbG93ZWQoZmlsZW5hbWUsIG1pbWV0eXBlKSB7XHJcbiAgY29uc3QgZXh0ZW5zaW9uID0gcGF0aC5leHRuYW1lKGZpbGVuYW1lKS50b0xvd2VyQ2FzZSgpO1xyXG4gIFxyXG4gIC8vIFhhdmZsaSBmYXlsbGFybmkgcmFkIGV0aXNoXHJcbiAgaWYgKERBTkdFUk9VU19FWFRFTlNJT05TLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgLy8gUnV4c2F0IGJlcmlsZ2FuIGtlbmdheXRtYWxhcm5pIHRla3NoaXJpc2hcclxuICBjb25zdCBhbGxBbGxvd2VkRXh0ZW5zaW9ucyA9IE9iamVjdC52YWx1ZXMoQUxMT1dFRF9GSUxFX1RZUEVTKS5mbGF0KCk7XHJcbiAgY29uc3QgaXNFeHRlbnNpb25BbGxvd2VkID0gYWxsQWxsb3dlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0ZW5zaW9uKTtcclxuICBcclxuICAvLyBNSU1FIHR5cGUgdGVrc2hpcnV2aVxyXG4gIGNvbnN0IGlzTWltZVR5cGVBbGxvd2VkID0gQUxMT1dFRF9NSU1FX1RZUEVTLmluY2x1ZGVzKG1pbWV0eXBlKTtcclxuICBcclxuICByZXR1cm4gaXNFeHRlbnNpb25BbGxvd2VkICYmIGlzTWltZVR5cGVBbGxvd2VkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzYW5pdGl6ZUZpbGVuYW1lKGZpbGVuYW1lKSB7XHJcbiAgLy8gWGF2ZmxpIGJlbGdpbGFybmkgb2xpYiB0YXNobGFzaFxyXG4gIHJldHVybiBmaWxlbmFtZS5yZXBsYWNlKC9bXmEtekEtWjAtOVxcLV9cXC5dL2csICdfJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBJbmNvbWluZ0Zvcm0oe1xyXG4gICAgICBtYXhGaWxlU2l6ZTogTUFYX0ZJTEVfU0laRSxcclxuICAgICAgbWF4RmlsZXM6IDUsIC8vIE1ha3NpbXVtIDUgdGEgZmF5bFxyXG4gICAgICBhbGxvd0VtcHR5RmlsZXM6IGZhbHNlLFxyXG4gICAgICBtaW5GaWxlU2l6ZTogMSwgLy8gTWluaW11bSAxIGJ5dGVcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHVwbG9hZERpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2Fzc2V0cycpO1xyXG4gICAgXHJcbiAgICAvLyBBc3NldHMgcGFwa2FzaW5pIHlhcmF0aXNoXHJcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmModXBsb2FkRGlyKSkge1xyXG4gICAgICBmcy5ta2RpclN5bmModXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtLnBhcnNlKHJlcSwgKGVyciwgZmllbGRzLCBmaWxlcykgPT4ge1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRm9ybSBwYXJzZSBlcnJvcjonLCBlcnIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFhhdG9saWsgdHVyaW5pIGFuaXFsYXNoXHJcbiAgICAgICAgaWYgKGVyci5jb2RlID09PSAnTElNSVRfRklMRV9TSVpFJykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDEzKS5qc29uKHsgXHJcbiAgICAgICAgICAgIGVycm9yOiAnRmF5bCBoYWptaSBqdWRhIGthdHRhIChtYWtzaW11bSA1ME1CKScgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdZdWtsYXNoZGEgeGF0b2xpayB5dXogYmVyZGknIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmaWxlID0gZmlsZXMuZmlsZTtcclxuICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdIZWNoIHFhbmRheSBmYXlsIHl1a2xhbm1hZGknIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGYXlsIG1hc3NpdmRhbiBiaXJpbmNoaXNpbmkgb2xpc2hcclxuICAgICAgY29uc3QgZmlsZUFycmF5ID0gQXJyYXkuaXNBcnJheShmaWxlKSA/IGZpbGVbMF0gOiBmaWxlO1xyXG4gICAgICBjb25zdCBvcmlnaW5hbE5hbWUgPSBmaWxlQXJyYXkub3JpZ2luYWxGaWxlbmFtZSB8fCAndW5rbm93bic7XHJcbiAgICAgIGNvbnN0IG1pbWV0eXBlID0gZmlsZUFycmF5Lm1pbWV0eXBlO1xyXG4gICAgICBjb25zdCBmaWxlU2l6ZSA9IGZpbGVBcnJheS5zaXplO1xyXG5cclxuICAgICAgLy8gRmF5bCB0dXJpbmkgdGVrc2hpcmlzaFxyXG4gICAgICBpZiAoIWlzRmlsZVR5cGVBbGxvd2VkKG9yaWdpbmFsTmFtZSwgbWltZXR5cGUpKSB7XHJcbiAgICAgICAgLy8gVmFxdGluY2hhbGlrIGZheWxuaSBvJ2NoaXJpc2hcclxuICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVBcnJheS5maWxlcGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXHJcbiAgICAgICAgICBlcnJvcjogJ1VzaGJ1IGZheWwgdHVyaSBydXhzYXQgYmVyaWxtYWdhbicsXHJcbiAgICAgICAgICBhbGxvd2VkVHlwZXM6ICdSYXNtLCB2aWRlbywgaHVqamF0LCBhdWRpbyB2YSBhcnhpdiBmYXlsbGFyaSdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRmF5bCBvJ2xjaGFtaW5pIHFvJ3NoaW1jaGEgdGVrc2hpcmlzaFxyXG4gICAgICBpZiAoZmlsZVNpemUgPiBNQVhfRklMRV9TSVpFKSB7XHJcbiAgICAgICAgZnMudW5saW5rU3luYyhmaWxlQXJyYXkuZmlsZXBhdGgpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQxMykuanNvbih7IFxyXG4gICAgICAgICAgZXJyb3I6ICdGYXlsIGhham1pIGp1ZGEga2F0dGEgKG1ha3NpbXVtIDUwTUIpJyBcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTWF5ZG9ubGFyZGFuIG1hJ2x1bW90bGFybmkgb2xpc2hcclxuICAgICAgY29uc3QgdHlwZSA9IEFycmF5LmlzQXJyYXkoZmllbGRzLnR5cGUpID8gZmllbGRzLnR5cGVbMF0gOiBmaWVsZHMudHlwZTtcclxuICAgICAgY29uc3QgdXNlcm5hbWUgPSBBcnJheS5pc0FycmF5KGZpZWxkcy51c2VybmFtZSkgPyBmaWVsZHMudXNlcm5hbWVbMF0gOiBmaWVsZHMudXNlcm5hbWU7XHJcbiAgICAgIGNvbnN0IHBvc3RJbmRleCA9IEFycmF5LmlzQXJyYXkoZmllbGRzLnBvc3RJbmRleCkgPyBmaWVsZHMucG9zdEluZGV4WzBdIDogZmllbGRzLnBvc3RJbmRleDtcclxuXHJcbiAgICAgIC8vIEZheWwgbm9taW5pIHhhdmZzaXogcWlsaXNoXHJcbiAgICAgIGNvbnN0IHNhZmVPcmlnaW5hbE5hbWUgPSBzYW5pdGl6ZUZpbGVuYW1lKG9yaWdpbmFsTmFtZSk7XHJcbiAgICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBwYXRoLmV4dG5hbWUoc2FmZU9yaWdpbmFsTmFtZSk7XHJcbiAgICAgIGNvbnN0IGJhc2VOYW1lID0gcGF0aC5iYXNlbmFtZShzYWZlT3JpZ2luYWxOYW1lLCBmaWxlRXh0ZW5zaW9uKTtcclxuXHJcbiAgICAgIC8vIE5veW9iIGZheWwgbm9taSB5YXJhdGlzaFxyXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCByYW5kb21TdHJpbmcgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCk7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgZmlsZU5hbWU7XHJcbiAgICAgIGlmICh0eXBlID09PSAncHJvZmlsZScpIHtcclxuICAgICAgICBmaWxlTmFtZSA9IGBwcm9maWxlXyR7dXNlcm5hbWV9XyR7dGltZXN0YW1wfV8ke3JhbmRvbVN0cmluZ30ke2ZpbGVFeHRlbnNpb259YDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmaWxlTmFtZSA9IGBwb3N0XyR7dXNlcm5hbWV9XyR7cG9zdEluZGV4fV8ke3RpbWVzdGFtcH1fJHtyYW5kb21TdHJpbmd9JHtmaWxlRXh0ZW5zaW9ufWA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5ld1BhdGggPSBwYXRoLmpvaW4odXBsb2FkRGlyLCBmaWxlTmFtZSk7XHJcblxyXG4gICAgICAvLyBGYXlsbmkga28nY2hpcmlzaFxyXG4gICAgICBmcy5yZW5hbWUoZmlsZUFycmF5LmZpbGVwYXRoLCBuZXdQYXRoLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmlsZSBtb3ZlIGVycm9yOicsIGVycik7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZheWxuaSBzYXFsYXNoZGEgeGF0b2xpaycgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGYXlsIHJ1eHNhdGxhcmluaSBvJ3JuYXRpc2ggKGl4dGl5b3JpeSlcclxuICAgICAgICBmcy5jaG1vZChuZXdQYXRoLCAwbzY0NCwgKGNobW9kRXJyKSA9PiB7XHJcbiAgICAgICAgICBpZiAoY2htb2RFcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdDaG1vZCB3YXJuaW5nOicsIGNobW9kRXJyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSmF2b2JuaSBxYXl0YXJpc2hcclxuICAgICAgICBjb25zdCBwdWJsaWNVcmwgPSBgL2Fzc2V0cy8ke2ZpbGVOYW1lfWA7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICAgICAgdXJsOiBwdWJsaWNVcmwsXHJcbiAgICAgICAgICBmaWxlbmFtZTogZmlsZU5hbWUsXHJcbiAgICAgICAgICBvcmlnaW5hbE5hbWU6IG9yaWdpbmFsTmFtZSxcclxuICAgICAgICAgIGZpbGVTaXplOiBmaWxlU2l6ZSxcclxuICAgICAgICAgIG1pbWVUeXBlOiBtaW1ldHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignVXBsb2FkIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJY2hraSBzZXJ2ZXIgeGF0b2xpZ2knIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJJbmNvbWluZ0Zvcm0iLCJmcyIsInBhdGgiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiQUxMT1dFRF9GSUxFX1RZUEVTIiwiaW1hZ2VzIiwidmlkZW9zIiwiZG9jdW1lbnRzIiwiYXVkaW8iLCJhcmNoaXZlcyIsIkFMTE9XRURfTUlNRV9UWVBFUyIsIk1BWF9GSUxFX1NJWkUiLCJEQU5HRVJPVVNfRVhURU5TSU9OUyIsImlzRmlsZVR5cGVBbGxvd2VkIiwiZmlsZW5hbWUiLCJtaW1ldHlwZSIsImV4dGVuc2lvbiIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYWxsQWxsb3dlZEV4dGVuc2lvbnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmbGF0IiwiaXNFeHRlbnNpb25BbGxvd2VkIiwiaXNNaW1lVHlwZUFsbG93ZWQiLCJzYW5pdGl6ZUZpbGVuYW1lIiwicmVwbGFjZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJmb3JtIiwibWF4RmlsZVNpemUiLCJtYXhGaWxlcyIsImFsbG93RW1wdHlGaWxlcyIsIm1pbkZpbGVTaXplIiwidXBsb2FkRGlyIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwicGFyc2UiLCJlcnIiLCJmaWVsZHMiLCJmaWxlcyIsImNvbnNvbGUiLCJjb2RlIiwiZmlsZSIsImZpbGVBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsIm9yaWdpbmFsTmFtZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJmaWxlU2l6ZSIsInNpemUiLCJ1bmxpbmtTeW5jIiwiZmlsZXBhdGgiLCJhbGxvd2VkVHlwZXMiLCJ0eXBlIiwidXNlcm5hbWUiLCJwb3N0SW5kZXgiLCJzYWZlT3JpZ2luYWxOYW1lIiwiZmlsZUV4dGVuc2lvbiIsImJhc2VOYW1lIiwiYmFzZW5hbWUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicmFuZG9tU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZmlsZU5hbWUiLCJuZXdQYXRoIiwicmVuYW1lIiwiY2htb2QiLCJjaG1vZEVyciIsIndhcm4iLCJwdWJsaWNVcmwiLCJzdWNjZXNzIiwidXJsIiwibWltZVR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();