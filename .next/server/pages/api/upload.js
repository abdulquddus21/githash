"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload";
exports.ids = ["pages/api/upload"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "backblaze-b2":
/*!*******************************!*\
  !*** external "backblaze-b2" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("backblaze-b2");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload.js */ \"(api)/./pages/api/upload.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload\",\n        pathname: \"/api/upload\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXBsb2FkLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJpdmF0ZS8/YjNmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVwbG9hZC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/upload.js":
/*!*****************************!*\
  !*** ./pages/api/upload.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! os */ \"os\");\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var backblaze_b2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! backblaze-b2 */ \"backblaze-b2\");\n/* harmony import */ var backblaze_b2__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(backblaze_b2__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_8__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_1__]);\nformidable__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\nconst execAsync = (0,util__WEBPACK_IMPORTED_MODULE_8__.promisify)(child_process__WEBPACK_IMPORTED_MODULE_7__.exec);\n// Supabase sozlamalari\nconst SUPABASE_URL = \"https://xzbwfoacsnrmgjmildcr.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6Yndmb2Fjc25ybWdqbWlsZGNyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxOTkxNzUsImV4cCI6MjA3Mzc3NTE3NX0.c10rEbuzQIkVvuJEecEltokgaj6AqjyP5IoFVffjizc\";\n// Backblaze sozlamalari\nconst BACKBLAZE_KEY_ID = process.env.BACKBLAZE_KEY_ID;\nconst BACKBLAZE_APP_KEY = process.env.BACKBLAZE_APP_KEY;\nconst BUCKET_NAME = process.env.BUCKET_NAME;\n// Supabase client\nconst supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_ANON_KEY);\n// Backblaze client\nlet b2 = null;\nlet isB2Initialized = false;\nlet bucketId = null;\nlet downloadUrl = null;\n// Video formatlarini aniqlash\nconst VIDEO_FORMATS = [\n    \"video/mp4\",\n    \"video/avi\",\n    \"video/mov\",\n    \"video/wmv\",\n    \"video/flv\",\n    \"video/webm\",\n    \"video/mkv\",\n    \"video/3gp\",\n    \"video/m4v\",\n    \"video/quicktime\"\n];\n// Video kompressiya sozlamalari\nconst VIDEO_COMPRESSION_SETTINGS = {\n    resolution: \"720x480\",\n    videoBitrate: \"800k\",\n    audioBitrate: \"128k\",\n    fps: 30,\n    codec: \"libx264\",\n    audioCodec: \"aac\",\n    preset: \"fast\",\n    crf: 28 // Quality (18-28 oralig'ida, katta raqam - kichik hajm)\n};\n// FFmpeg mavjudligini tekshirish\nasync function checkFFmpegAvailability() {\n    try {\n        const { stdout } = await execAsync(\"ffmpeg -version\");\n        if (stdout.includes(\"ffmpeg version\")) {\n            console.log(\"✅ FFmpeg mavjud\");\n            return true;\n        }\n    } catch (error) {\n        console.log(\"❌ FFmpeg topilmadi, video kompressiya o'chiriladi\");\n        return false;\n    }\n    return false;\n}\n// Video faylni siqish\nasync function compressVideo(inputPath, outputPath, mimeType) {\n    try {\n        console.log(\"\\uD83C\\uDFAC Video kompressiya boshlanmoqda...\");\n        console.log(\"\\uD83D\\uDCE5 Input:\", inputPath);\n        console.log(\"\\uD83D\\uDCE4 Output:\", outputPath);\n        // FFmpeg buyrug'ini tuzish\n        const ffmpegCommand = [\n            \"ffmpeg\",\n            \"-i\",\n            `\"${inputPath}\"`,\n            \"-c:v\",\n            VIDEO_COMPRESSION_SETTINGS.codec,\n            \"-c:a\",\n            VIDEO_COMPRESSION_SETTINGS.audioCodec,\n            \"-b:v\",\n            VIDEO_COMPRESSION_SETTINGS.videoBitrate,\n            \"-b:a\",\n            VIDEO_COMPRESSION_SETTINGS.audioBitrate,\n            \"-r\",\n            VIDEO_COMPRESSION_SETTINGS.fps,\n            \"-crf\",\n            VIDEO_COMPRESSION_SETTINGS.crf,\n            \"-preset\",\n            VIDEO_COMPRESSION_SETTINGS.preset,\n            \"-vf\",\n            `scale=${VIDEO_COMPRESSION_SETTINGS.resolution}:force_original_aspect_ratio=decrease,pad=${VIDEO_COMPRESSION_SETTINGS.resolution}:(ow-iw)/2:(oh-ih)/2`,\n            \"-movflags\",\n            \"+faststart\",\n            \"-y\",\n            `\"${outputPath}\"` // Output fayl\n        ].join(\" \");\n        console.log(\"\\uD83D\\uDD04 FFmpeg buyrug'i:\", ffmpegCommand.substring(0, 100) + \"...\");\n        // Kompressiya vaqtini o'lchash\n        const startTime = Date.now();\n        const { stdout, stderr } = await execAsync(ffmpegCommand, {\n            timeout: 300000,\n            maxBuffer: 1024 * 1024 * 10 // 10MB buffer\n        });\n        const endTime = Date.now();\n        const duration = ((endTime - startTime) / 1000).toFixed(2);\n        // Natijalarni tekshirish\n        if ((0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(outputPath)) {\n            const originalStats = await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().stat(inputPath);\n            const compressedStats = await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().stat(outputPath);\n            const originalSize = originalStats.size;\n            const compressedSize = compressedStats.size;\n            const compressionRatio = ((originalSize - compressedSize) / originalSize * 100).toFixed(2);\n            console.log(\"✅ Video kompressiya tugadi\");\n            console.log(`📊 Asl hajm: ${(originalSize / 1024 / 1024).toFixed(2)}MB`);\n            console.log(`📊 Yangi hajm: ${(compressedSize / 1024 / 1024).toFixed(2)}MB`);\n            console.log(`📊 Tejash: ${compressionRatio}%`);\n            console.log(`⏱️ Vaqt: ${duration}s`);\n            return {\n                success: true,\n                originalSize,\n                compressedSize,\n                compressionRatio: parseFloat(compressionRatio),\n                duration: parseFloat(duration)\n            };\n        } else {\n            throw new Error(\"Kompressiya natijasida fayl yaratilmadi\");\n        }\n    } catch (error) {\n        console.error(\"❌ Video kompressiya xatosi:\", error.message);\n        // Agar FFmpeg xatosi bo'lsa, asl faylni qaytarish\n        if (error.message.includes(\"timeout\") || error.message.includes(\"ffmpeg\")) {\n            console.log(\"⚠️ Kompressiya muvaffaqiyatsiz, asl fayl ishlatiladi\");\n            return {\n                success: false,\n                error: error.message,\n                useOriginal: true\n            };\n        }\n        throw error;\n    }\n}\n// Video fayl ekanligini aniqlash\nfunction isVideoFile(mimeType, filename) {\n    if (mimeType && VIDEO_FORMATS.includes(mimeType.toLowerCase())) {\n        return true;\n    }\n    // Fayl nomidan ham tekshirish\n    const videoExtensions = [\n        \".mp4\",\n        \".avi\",\n        \".mov\",\n        \".wmv\",\n        \".flv\",\n        \".webm\",\n        \".mkv\",\n        \".3gp\",\n        \".m4v\"\n    ];\n    const extension = path__WEBPACK_IMPORTED_MODULE_4___default().extname(filename).toLowerCase();\n    return videoExtensions.includes(extension);\n}\n// Backblaze ni ishga tushirish\nasync function initializeB2() {\n    try {\n        if (isB2Initialized && b2 && bucketId && downloadUrl) {\n            console.log(\"✅ B2 already initialized\");\n            return true;\n        }\n        // Environment variables ni tekshirish\n        if (!BACKBLAZE_KEY_ID || !BACKBLAZE_APP_KEY || !BUCKET_NAME) {\n            throw new Error(\"Backblaze sozlamalari .env.local faylida to'liq emas\");\n        }\n        console.log(\"\\uD83D\\uDD04 Initializing Backblaze B2...\");\n        console.log(\"Key ID:\", BACKBLAZE_KEY_ID.substring(0, 10) + \"...\");\n        console.log(\"Bucket:\", BUCKET_NAME);\n        // B2 client yaratish\n        b2 = new (backblaze_b2__WEBPACK_IMPORTED_MODULE_6___default())({\n            applicationKeyId: BACKBLAZE_KEY_ID,\n            applicationKey: BACKBLAZE_APP_KEY\n        });\n        // Autorizatsiya\n        console.log(\"\\uD83D\\uDD10 Authorizing with Backblaze...\");\n        const authResponse = await b2.authorize();\n        if (!authResponse?.data) {\n            throw new Error(\"Authorization javob bo'sh\");\n        }\n        downloadUrl = authResponse.data.downloadUrl;\n        console.log(\"✅ Authorization successful\");\n        // Bucket topish\n        console.log(\"\\uD83D\\uDDC2️ Finding bucket...\");\n        const bucketsResponse = await b2.listBuckets();\n        if (!bucketsResponse?.data?.buckets) {\n            throw new Error(\"Buckets ro'yxati olinmadi\");\n        }\n        const bucket = bucketsResponse.data.buckets.find((b)=>b.bucketName === BUCKET_NAME);\n        if (!bucket) {\n            throw new Error(`Bucket \"${BUCKET_NAME}\" topilmadi. Mavjud bucketlar: ${bucketsResponse.data.buckets.map((b)=>b.bucketName).join(\", \")}`);\n        }\n        bucketId = bucket.bucketId;\n        isB2Initialized = true;\n        console.log(\"✅ Bucket topildi:\", bucket.bucketName);\n        console.log(\"✅ Bucket ID:\", bucketId);\n        console.log(\"✅ Download URL:\", downloadUrl.substring(0, 30) + \"...\");\n        return true;\n    } catch (error) {\n        console.error(\"❌ Backblaze initialization xatosi:\");\n        console.error(\"Message:\", error.message);\n        console.error(\"Status:\", error.response?.status);\n        console.error(\"Response:\", error.response?.data);\n        // Reset qilish\n        b2 = null;\n        isB2Initialized = false;\n        bucketId = null;\n        downloadUrl = null;\n        if (error.response?.status === 401) {\n            throw new Error(\"❌ Backblaze kalitlari noto'g'ri! Yangi Application Key yarating va ruxsatlarni tekshiring.\");\n        } else if (error.response?.status === 403) {\n            throw new Error(\"❌ Ruxsat yo'q! Application Key da Read/Write ruxsatlari bor-mi tekshiring.\");\n        } else if (error.code === \"ENOTFOUND\") {\n            throw new Error(\"❌ Internet ulanishi muammosi\");\n        } else {\n            throw new Error(`❌ Backblaze xatosi: ${error.message}`);\n        }\n    }\n}\n// Fayl nomini tozalash\nfunction sanitizeFilename(filename) {\n    return filename.replace(/[^a-zA-Z0-9\\-_\\.]/g, \"_\").replace(/_{2,}/g, \"_\").toLowerCase();\n}\n// Faylni Backblaze ga yuklash\nasync function uploadFileToB2(filePath, fileName, mimeType) {\n    try {\n        if (!b2 || !bucketId) {\n            throw new Error(\"B2 ishga tushirilmagan\");\n        }\n        // Fayl mavjudligini tekshirish\n        if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(filePath)) {\n            throw new Error(`Fayl topilmadi: ${filePath}`);\n        }\n        console.log(\"\\uD83D\\uDCE4 Uploading:\", fileName);\n        // Fayl o'qish\n        const fileBuffer = await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().readFile(filePath);\n        console.log(\"\\uD83D\\uDCC1 File size:\", (fileBuffer.length / 1024 / 1024).toFixed(2), \"MB\");\n        // Upload URL olish\n        const uploadUrlResponse = await b2.getUploadUrl({\n            bucketId\n        });\n        if (!uploadUrlResponse?.data) {\n            throw new Error(\"Upload URL olinmadi\");\n        }\n        // Faylni yuklash\n        const uploadResponse = await b2.uploadFile({\n            uploadUrl: uploadUrlResponse.data.uploadUrl,\n            uploadAuthToken: uploadUrlResponse.data.authorizationToken,\n            fileName: fileName,\n            data: fileBuffer,\n            contentType: mimeType || \"application/octet-stream\"\n        });\n        if (!uploadResponse?.data) {\n            throw new Error(\"Upload javob bo'sh\");\n        }\n        console.log(\"✅ Upload successful:\", uploadResponse.data.fileName);\n        return uploadResponse.data;\n    } catch (error) {\n        console.error(\"❌ Upload error:\", error.message);\n        throw new Error(`Upload xatosi: ${error.message}`);\n    }\n}\n// Umumiy URL yaratish\nfunction createPublicUrl(fileName) {\n    try {\n        if (!downloadUrl || !BUCKET_NAME) {\n            throw new Error(\"Download URL yoki bucket nomi yo'q\");\n        }\n        const encodedFileName = encodeURIComponent(fileName);\n        const publicUrl = `${downloadUrl}/file/${BUCKET_NAME}/${encodedFileName}`;\n        console.log(\"\\uD83D\\uDD17 Public URL:\", publicUrl);\n        return publicUrl;\n    } catch (error) {\n        console.error(\"❌ URL yaratish xatosi:\", error.message);\n        throw new Error(`URL yaratish xatosi: ${error.message}`);\n    }\n}\n// Vaqtinchalik faylni o'chirish\nasync function cleanupTempFile(filePath) {\n    try {\n        if ((0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(filePath)) {\n            await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().unlink(filePath);\n            console.log(\"\\uD83D\\uDDD1️ Temp file deleted:\", filePath);\n        }\n    } catch (error) {\n        console.warn(\"⚠️ Temp file deletion warning:\", error.message);\n    }\n}\nconst config = {\n    api: {\n        bodyParser: false,\n        responseLimit: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Faqat POST so'rovlari qabul qilinadi\",\n            method: req.method\n        });\n    }\n    // FFmpeg mavjudligini tekshirish\n    const isFFmpegAvailable = await checkFFmpegAvailability();\n    try {\n        console.log(\"\\uD83D\\uDE80 Starting upload process...\");\n        // Backblaze ni ishga tushirish\n        await initializeB2();\n        // Vaqtinchalik papka yaratish va tekshirish\n        let tempDir;\n        try {\n            tempDir = os__WEBPACK_IMPORTED_MODULE_5___default().tmpdir();\n            console.log(\"\\uD83D\\uDCC1 Using temp directory:\", tempDir);\n            // Temp papka mavjudligini tekshirish va yaratish\n            if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(tempDir)) {\n                await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().mkdir(tempDir, {\n                    recursive: true\n                });\n                console.log(\"\\uD83D\\uDCC1 Created temp directory:\", tempDir);\n            }\n        } catch (tempError) {\n            console.error(\"❌ Temp directory error:\", tempError.message);\n            // Fallback - joriy papkada temp yaratish\n            tempDir = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"temp\");\n            if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(tempDir)) {\n                await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().mkdir(tempDir, {\n                    recursive: true\n                });\n                console.log(\"\\uD83D\\uDCC1 Created fallback temp directory:\", tempDir);\n            }\n        }\n        // Formidable sozlamalari - barcha hajm cheklovlarini olib tashlash\n        const form = (0,formidable__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            multiples: true,\n            uploadDir: tempDir,\n            keepExtensions: true,\n            allowEmptyFiles: false,\n            minFileSize: 1,\n            // Barcha hajm cheklovlarini olib tashladik\n            maxFileSize: Infinity,\n            maxFiles: Infinity,\n            maxTotalFileSize: Infinity,\n            maxFieldsSize: Infinity,\n            createDirsFromUploads: true\n        });\n        console.log(\"\\uD83D\\uDCCB Parsing form data...\");\n        const { fields, files } = await new Promise((resolve, reject)=>{\n            form.parse(req, (err, fields, files)=>{\n                if (err) {\n                    console.error(\"❌ Form parsing error:\", err.message);\n                    reject(new Error(`Form parsing xatosi: ${err.message}`));\n                } else {\n                    console.log(\"✅ Form parsed successfully\");\n                    resolve({\n                        fields,\n                        files\n                    });\n                }\n            });\n        });\n        console.log(\"\\uD83D\\uDCC1 Files received:\", Object.keys(files));\n        console.log(\"\\uD83D\\uDCDD Fields received:\", Object.keys(fields));\n        // Fayl mavjudligini tekshirish\n        if (!files.file) {\n            return res.status(400).json({\n                error: \"Hech qanday fayl yuklanmadi\",\n                received: Object.keys(files)\n            });\n        }\n        const uploadedFiles = Array.isArray(files.file) ? files.file : [\n            files.file\n        ];\n        // Jami hajmni hisoblash (faqat ma'lumot uchun, cheklash uchun emas)\n        const totalSize = uploadedFiles.reduce((sum, file)=>sum + (file.size || 0), 0);\n        // Fields ni olish\n        const type = Array.isArray(fields.type) ? fields.type[0] : fields.type || \"post\";\n        const username = Array.isArray(fields.username) ? fields.username[0] : fields.username;\n        const postIndex = Array.isArray(fields.postIndex) ? fields.postIndex[0] : fields.postIndex;\n        if (!username) {\n            return res.status(400).json({\n                error: \"Username majburiy\",\n                fields: Object.keys(fields)\n            });\n        }\n        console.log(`📊 Upload session: type=${type}, username=${username}, files=${uploadedFiles.length}`);\n        console.log(`📊 Total size: ${(totalSize / 1024 / 1024 / 1024).toFixed(2)} GB`);\n        console.log(`🎬 Video compression: ${isFFmpegAvailable ? \"ENABLED\" : \"DISABLED\"}`);\n        const results = [];\n        const errors = [];\n        // Har bir faylni yuklash\n        for(let i = 0; i < uploadedFiles.length; i++){\n            const file = uploadedFiles[i];\n            let tempFilePath = null;\n            let compressedFilePath = null;\n            try {\n                const originalName = file.originalFilename || `file_${i + 1}`;\n                const mimeType = file.mimetype || \"application/octet-stream\";\n                const fileSize = file.size || 0;\n                tempFilePath = file.filepath;\n                console.log(`📤 Processing ${i + 1}/${uploadedFiles.length}: ${originalName}`);\n                console.log(`📊 Size: ${(fileSize / 1024 / 1024).toFixed(2)}MB, Type: ${mimeType}`);\n                // Faqat bo'sh fayl tekshirish qoldik\n                if (fileSize === 0) {\n                    throw new Error(\"Bo'sh fayl\");\n                }\n                // Fayl mavjudligini tekshirish\n                if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(tempFilePath)) {\n                    // Agar fayl yo'q bo'lsa, biroz kutib qayta tekshirish\n                    console.log(\"⏳ File not found, waiting 1 second...\");\n                    await new Promise((resolve)=>setTimeout(resolve, 1000));\n                    if (!(0,fs__WEBPACK_IMPORTED_MODULE_3__.existsSync)(tempFilePath)) {\n                        throw new Error(`Vaqtinchalik fayl topilmadi: ${tempFilePath}`);\n                    }\n                }\n                // Fayl hajmini olish va tekshirish\n                const fileStats = await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().stat(tempFilePath);\n                const actualFileSize = fileStats.size;\n                console.log(`📊 File stats: reported=${fileSize}, actual=${actualFileSize}`);\n                if (actualFileSize === 0) {\n                    throw new Error(\"Bo'sh fayl\");\n                }\n                // Video fayl ekanligini aniqlash va siqish\n                let finalFilePath = tempFilePath;\n                let finalFileSize = actualFileSize;\n                let compressionInfo = null;\n                if (isFFmpegAvailable && isVideoFile(mimeType, originalName)) {\n                    console.log(\"\\uD83C\\uDFAC Video fayl aniqlandi, kompressiya boshlanmoqda...\");\n                    // Kompressiya uchun yangi fayl yo'li\n                    const compressedName = `compressed_${Date.now()}_${path__WEBPACK_IMPORTED_MODULE_4___default().basename(tempFilePath, path__WEBPACK_IMPORTED_MODULE_4___default().extname(tempFilePath))}.mp4`;\n                    compressedFilePath = path__WEBPACK_IMPORTED_MODULE_4___default().join(tempDir, compressedName);\n                    try {\n                        compressionInfo = await compressVideo(tempFilePath, compressedFilePath, mimeType);\n                        if (compressionInfo.success) {\n                            finalFilePath = compressedFilePath;\n                            finalFileSize = compressionInfo.compressedSize;\n                            console.log(`✅ Video kompressiya muvaffaqiyatli: ${compressionInfo.compressionRatio}% tejash`);\n                        } else if (compressionInfo.useOriginal) {\n                            console.log(\"⚠️ Kompressiya ishlamadi, asl fayl ishlatiladi\");\n                        }\n                    } catch (compressionError) {\n                        console.error(\"❌ Video kompressiya xatosi:\", compressionError.message);\n                        console.log(\"⚠️ Asl fayl ishlatiladi\");\n                    }\n                }\n                // Fayl nomini yaratish\n                const safeOriginalName = sanitizeFilename(originalName);\n                const fileExtension = compressionInfo?.success ? \".mp4\" : path__WEBPACK_IMPORTED_MODULE_4___default().extname(safeOriginalName) || \"\";\n                const timestamp = Date.now();\n                const randomId = Math.random().toString(36).substring(2, 8);\n                let fileName;\n                if (type === \"profile\") {\n                    fileName = `profiles/${username}_${timestamp}_${randomId}${fileExtension}`;\n                } else {\n                    const postSuffix = postIndex ? `_post${postIndex}` : \"\";\n                    const fileSuffix = uploadedFiles.length > 1 ? `_${i + 1}` : \"\";\n                    fileName = `posts/${username}${postSuffix}${fileSuffix}_${timestamp}_${randomId}${fileExtension}`;\n                }\n                console.log(`🎯 Destination: ${fileName}`);\n                // Faylni yuklash\n                const uploadResult = await uploadFileToB2(finalFilePath, fileName, compressionInfo?.success ? \"video/mp4\" : mimeType);\n                // Umumiy URL yaratish\n                const publicUrl = createPublicUrl(fileName);\n                results.push({\n                    success: true,\n                    url: publicUrl,\n                    filename: uploadResult.fileName,\n                    originalName: originalName,\n                    fileSize: finalFileSize,\n                    originalFileSize: actualFileSize,\n                    mimeType: compressionInfo?.success ? \"video/mp4\" : mimeType,\n                    bucket: BUCKET_NAME,\n                    type: type,\n                    fileIndex: i + 1,\n                    totalFiles: uploadedFiles.length,\n                    compressed: compressionInfo?.success || false,\n                    compressionRatio: compressionInfo?.compressionRatio || null,\n                    compressionDuration: compressionInfo?.duration || null\n                });\n                console.log(`✅ Success ${i + 1}/${uploadedFiles.length}: ${originalName}`);\n            } catch (fileError) {\n                console.error(`❌ File error ${i + 1}/${uploadedFiles.length}:`, fileError.message);\n                errors.push({\n                    filename: file.originalFilename || `file_${i + 1}`,\n                    error: fileError.message,\n                    fileIndex: i + 1\n                });\n            } finally{\n                // Vaqtinchalik fayllarni o'chirish\n                if (tempFilePath) {\n                    await cleanupTempFile(tempFilePath);\n                }\n                if (compressedFilePath && compressedFilePath !== tempFilePath) {\n                    await cleanupTempFile(compressedFilePath);\n                }\n            }\n        }\n        // Natija\n        const response = {\n            success: errors.length === 0,\n            uploaded: results,\n            errors: errors,\n            summary: {\n                totalFiles: uploadedFiles.length,\n                successful: results.length,\n                failed: errors.length,\n                totalSize: totalSize < 1024 * 1024 * 1024 ? `${(totalSize / 1024 / 1024).toFixed(2)}MB` : `${(totalSize / 1024 / 1024 / 1024).toFixed(2)}GB`,\n                videosCompressed: results.filter((r)=>r.compressed).length,\n                ffmpegAvailable: isFFmpegAvailable\n            }\n        };\n        console.log(\"\\uD83C\\uDF89 Upload complete:\", response.summary);\n        const statusCode = errors.length === 0 ? 200 : results.length > 0 ? 207 : 400;\n        return res.status(statusCode).json(response);\n    } catch (error) {\n        console.error(\"❌ Global error:\", error.message);\n        console.error(\"Stack:\", error.stack);\n        return res.status(500).json({\n            error: \"Server xatoligi\",\n            details: error.message,\n            timestamp: new Date().toISOString()\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUNyQjBELFdBQVdBLFlBQVksT0FBTyxPQUFPLE9BQ2pDLENBQUMsRUFBRSxDQUFDQSxZQUFZLE9BQU8sSUFBRyxFQUFHckcsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQzNDLENBQUMsRUFBRSxDQUFDcUcsWUFBWSxPQUFPLE9BQU8sSUFBRyxFQUFHckcsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUN0RG9KLGtCQUFrQnpDLFFBQVEwQyxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVULFVBQVUsRUFBRWxHLE1BQU07Z0JBQzFENEcsaUJBQWlCbkY7WUFDbkI7UUFDRjtRQUVBdEYsUUFBUUMsR0FBRyxDQUFDLGlDQUF1QmtELFNBQVNnSCxPQUFPO1FBRW5ELE1BQU1PLGFBQWE1QyxPQUFPakUsTUFBTSxLQUFLLElBQUksTUFBT2dFLFFBQVFoRSxNQUFNLEdBQUcsSUFBSSxNQUFNO1FBQzNFLE9BQU9zQixJQUFJL0IsTUFBTSxDQUFDc0gsWUFBWXJGLElBQUksQ0FBQ2xDO0lBRXJDLEVBQUUsT0FBT2pELE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLG1CQUFtQkEsTUFBTTJCLE9BQU87UUFDOUM3QixRQUFRRSxLQUFLLENBQUMsVUFBVUEsTUFBTXlLLEtBQUs7UUFFbkMsT0FBT3hGLElBQUkvQixNQUFNLENBQUMsS0FBS2lDLElBQUksQ0FBQztZQUMxQm5GLE9BQU87WUFDUDBLLFNBQVMxSyxNQUFNMkIsT0FBTztZQUN0QnFILFdBQVcsSUFBSXZJLE9BQU9rSyxXQUFXO1FBQ25DO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByaXZhdGUvLi9wYWdlcy9hcGkvdXBsb2FkLmpzPzU1NzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuaW1wb3J0IGZvcm1pZGFibGUgZnJvbSAnZm9ybWlkYWJsZSc7XHJcbmltcG9ydCBmcyBmcm9tICdmcy9wcm9taXNlcyc7XHJcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xyXG5pbXBvcnQgQjIgZnJvbSAnYmFja2JsYXplLWIyJztcclxuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xyXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcclxuXHJcbmNvbnN0IGV4ZWNBc3luYyA9IHByb21pc2lmeShleGVjKTtcclxuXHJcbi8vIFN1cGFiYXNlIHNvemxhbWFsYXJpXHJcbmNvbnN0IFNVUEFCQVNFX1VSTCA9ICdodHRwczovL3h6Yndmb2Fjc25ybWdqbWlsZGNyLnN1cGFiYXNlLmNvJztcclxuY29uc3QgU1VQQUJBU0VfQU5PTl9LRVkgPSAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW5oNlluZG1iMkZqYzI1eWJXZHFiV2xzWkdOeUlpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTlRneE9Ua3hOelVzSW1WNGNDSTZNakEzTXpjM05URTNOWDAuYzEwckVidXpRSWtWdnVKRWVjRWx0b2tnYWo2QXFqeVA1SW9GVmZmaml6Yyc7XHJcblxyXG4vLyBCYWNrYmxhemUgc296bGFtYWxhcmlcclxuY29uc3QgQkFDS0JMQVpFX0tFWV9JRCA9IHByb2Nlc3MuZW52LkJBQ0tCTEFaRV9LRVlfSUQ7XHJcbmNvbnN0IEJBQ0tCTEFaRV9BUFBfS0VZID0gcHJvY2Vzcy5lbnYuQkFDS0JMQVpFX0FQUF9LRVk7XHJcbmNvbnN0IEJVQ0tFVF9OQU1FID0gcHJvY2Vzcy5lbnYuQlVDS0VUX05BTUU7XHJcblxyXG4vLyBTdXBhYmFzZSBjbGllbnRcclxuY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBjcmVhdGVDbGllbnQoU1VQQUJBU0VfVVJMLCBTVVBBQkFTRV9BTk9OX0tFWSk7XHJcblxyXG4vLyBCYWNrYmxhemUgY2xpZW50XHJcbmxldCBiMiA9IG51bGw7XHJcbmxldCBpc0IySW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxubGV0IGJ1Y2tldElkID0gbnVsbDtcclxubGV0IGRvd25sb2FkVXJsID0gbnVsbDtcclxuXHJcbi8vIFZpZGVvIGZvcm1hdGxhcmluaSBhbmlxbGFzaFxyXG5jb25zdCBWSURFT19GT1JNQVRTID0gW1xyXG4gICd2aWRlby9tcDQnLCAndmlkZW8vYXZpJywgJ3ZpZGVvL21vdicsICd2aWRlby93bXYnLCAndmlkZW8vZmx2JywgXHJcbiAgJ3ZpZGVvL3dlYm0nLCAndmlkZW8vbWt2JywgJ3ZpZGVvLzNncCcsICd2aWRlby9tNHYnLCAndmlkZW8vcXVpY2t0aW1lJ1xyXG5dO1xyXG5cclxuLy8gVmlkZW8ga29tcHJlc3NpeWEgc296bGFtYWxhcmlcclxuY29uc3QgVklERU9fQ09NUFJFU1NJT05fU0VUVElOR1MgPSB7XHJcbiAgcmVzb2x1dGlvbjogJzcyMHg0ODAnLCAvLyA0MjBwIGdhIHlhcWluXHJcbiAgdmlkZW9CaXRyYXRlOiAnODAwaycsICAgLy8gVmlkZW8gYml0cmF0ZVxyXG4gIGF1ZGlvQml0cmF0ZTogJzEyOGsnLCAgIC8vIEF1ZGlvIGJpdHJhdGVcclxuICBmcHM6IDMwLCAgICAgICAgICAgICAgICAvLyBGUFNcclxuICBjb2RlYzogJ2xpYngyNjQnLCAgICAgICAvLyBWaWRlbyBrb2Rla1xyXG4gIGF1ZGlvQ29kZWM6ICdhYWMnLCAgICAgIC8vIEF1ZGlvIGtvZGVrXHJcbiAgcHJlc2V0OiAnZmFzdCcsICAgICAgICAgLy8gRW5jb2RpbmcgdGV6bGlnaVxyXG4gIGNyZjogMjggICAgICAgICAgICAgICAgIC8vIFF1YWxpdHkgKDE4LTI4IG9yYWxpZydpZGEsIGthdHRhIHJhcWFtIC0ga2ljaGlrIGhham0pXHJcbn07XHJcblxyXG4vLyBGRm1wZWcgbWF2anVkbGlnaW5pIHRla3NoaXJpc2hcclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tGRm1wZWdBdmFpbGFiaWxpdHkoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCBleGVjQXN5bmMoJ2ZmbXBlZyAtdmVyc2lvbicpO1xyXG4gICAgaWYgKHN0ZG91dC5pbmNsdWRlcygnZmZtcGVnIHZlcnNpb24nKSkge1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEZGbXBlZyBtYXZqdWQnKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKCfinYwgRkZtcGVnIHRvcGlsbWFkaSwgdmlkZW8ga29tcHJlc3NpeWEgb1xcJ2NoaXJpbGFkaScpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8vIFZpZGVvIGZheWxuaSBzaXFpc2hcclxuYXN5bmMgZnVuY3Rpb24gY29tcHJlc3NWaWRlbyhpbnB1dFBhdGgsIG91dHB1dFBhdGgsIG1pbWVUeXBlKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn46sIFZpZGVvIGtvbXByZXNzaXlhIGJvc2hsYW5tb3FkYS4uLicpO1xyXG4gICAgY29uc29sZS5sb2coJ/Cfk6UgSW5wdXQ6JywgaW5wdXRQYXRoKTtcclxuICAgIGNvbnNvbGUubG9nKCfwn5OkIE91dHB1dDonLCBvdXRwdXRQYXRoKTtcclxuXHJcbiAgICAvLyBGRm1wZWcgYnV5cnVnJ2luaSB0dXppc2hcclxuICAgIGNvbnN0IGZmbXBlZ0NvbW1hbmQgPSBbXHJcbiAgICAgICdmZm1wZWcnLFxyXG4gICAgICAnLWknLCBgXCIke2lucHV0UGF0aH1cImAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5wdXQgZmF5bFxyXG4gICAgICAnLWM6dicsIFZJREVPX0NPTVBSRVNTSU9OX1NFVFRJTkdTLmNvZGVjLCAgICAgICAgICAgICAgICAgLy8gVmlkZW8ga29kZWtcclxuICAgICAgJy1jOmEnLCBWSURFT19DT01QUkVTU0lPTl9TRVRUSU5HUy5hdWRpb0NvZGVjLCAgICAgICAgICAgIC8vIEF1ZGlvIGtvZGVrXHJcbiAgICAgICctYjp2JywgVklERU9fQ09NUFJFU1NJT05fU0VUVElOR1MudmlkZW9CaXRyYXRlLCAgICAgICAgICAvLyBWaWRlbyBiaXRyYXRlXHJcbiAgICAgICctYjphJywgVklERU9fQ09NUFJFU1NJT05fU0VUVElOR1MuYXVkaW9CaXRyYXRlLCAgICAgICAgICAvLyBBdWRpbyBiaXRyYXRlXHJcbiAgICAgICctcicsIFZJREVPX0NPTVBSRVNTSU9OX1NFVFRJTkdTLmZwcywgICAgICAgICAgICAgICAgICAgICAvLyBGUFNcclxuICAgICAgJy1jcmYnLCBWSURFT19DT01QUkVTU0lPTl9TRVRUSU5HUy5jcmYsICAgICAgICAgICAgICAgICAgIC8vIFF1YWxpdHlcclxuICAgICAgJy1wcmVzZXQnLCBWSURFT19DT01QUkVTU0lPTl9TRVRUSU5HUy5wcmVzZXQsICAgICAgICAgICAgIC8vIEVuY29kaW5nIHByZXNldFxyXG4gICAgICAnLXZmJywgYHNjYWxlPSR7VklERU9fQ09NUFJFU1NJT05fU0VUVElOR1MucmVzb2x1dGlvbn06Zm9yY2Vfb3JpZ2luYWxfYXNwZWN0X3JhdGlvPWRlY3JlYXNlLHBhZD0ke1ZJREVPX0NPTVBSRVNTSU9OX1NFVFRJTkdTLnJlc29sdXRpb259Oihvdy1pdykvMjoob2gtaWgpLzJgLCAvLyBSZXNvbHV0aW9uIHZhIHBhZGRpbmdcclxuICAgICAgJy1tb3ZmbGFncycsICcrZmFzdHN0YXJ0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWIgdWNodW4gb3B0aW1pemF0c2l5YVxyXG4gICAgICAnLXknLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE92ZXJ3cml0ZVxyXG4gICAgICBgXCIke291dHB1dFBhdGh9XCJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3V0cHV0IGZheWxcclxuICAgIF0uam9pbignICcpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn5SEIEZGbXBlZyBidXlydWdcXCdpOicsIGZmbXBlZ0NvbW1hbmQuc3Vic3RyaW5nKDAsIDEwMCkgKyAnLi4uJyk7XHJcblxyXG4gICAgLy8gS29tcHJlc3NpeWEgdmFxdGluaSBvJ2xjaGFzaFxyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIFxyXG4gICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gYXdhaXQgZXhlY0FzeW5jKGZmbXBlZ0NvbW1hbmQsIHtcclxuICAgICAgdGltZW91dDogMzAwMDAwLCAvLyA1IGRhcWlxYSB0aW1lb3V0XHJcbiAgICAgIG1heEJ1ZmZlcjogMTAyNCAqIDEwMjQgKiAxMCAvLyAxME1CIGJ1ZmZlclxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBkdXJhdGlvbiA9ICgoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyAxMDAwKS50b0ZpeGVkKDIpO1xyXG5cclxuICAgIC8vIE5hdGlqYWxhcm5pIHRla3NoaXJpc2hcclxuICAgIGlmIChleGlzdHNTeW5jKG91dHB1dFBhdGgpKSB7XHJcbiAgICAgIGNvbnN0IG9yaWdpbmFsU3RhdHMgPSBhd2FpdCBmcy5zdGF0KGlucHV0UGF0aCk7XHJcbiAgICAgIGNvbnN0IGNvbXByZXNzZWRTdGF0cyA9IGF3YWl0IGZzLnN0YXQob3V0cHV0UGF0aCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBvcmlnaW5hbFNpemUgPSBvcmlnaW5hbFN0YXRzLnNpemU7XHJcbiAgICAgIGNvbnN0IGNvbXByZXNzZWRTaXplID0gY29tcHJlc3NlZFN0YXRzLnNpemU7XHJcbiAgICAgIGNvbnN0IGNvbXByZXNzaW9uUmF0aW8gPSAoKG9yaWdpbmFsU2l6ZSAtIGNvbXByZXNzZWRTaXplKSAvIG9yaWdpbmFsU2l6ZSAqIDEwMCkudG9GaXhlZCgyKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgVmlkZW8ga29tcHJlc3NpeWEgdHVnYWRpJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIEFzbCBoYWptOiAkeyhvcmlnaW5hbFNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQmApO1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+TiiBZYW5naSBoYWptOiAkeyhjb21wcmVzc2VkU2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfU1CYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIFRlamFzaDogJHtjb21wcmVzc2lvblJhdGlvfSVgKTtcclxuICAgICAgY29uc29sZS5sb2coYOKPse+4jyBWYXF0OiAke2R1cmF0aW9ufXNgKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBvcmlnaW5hbFNpemUsXHJcbiAgICAgICAgY29tcHJlc3NlZFNpemUsXHJcbiAgICAgICAgY29tcHJlc3Npb25SYXRpbzogcGFyc2VGbG9hdChjb21wcmVzc2lvblJhdGlvKSxcclxuICAgICAgICBkdXJhdGlvbjogcGFyc2VGbG9hdChkdXJhdGlvbilcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignS29tcHJlc3NpeWEgbmF0aWphc2lkYSBmYXlsIHlhcmF0aWxtYWRpJyk7XHJcbiAgICB9XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgVmlkZW8ga29tcHJlc3NpeWEgeGF0b3NpOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgXHJcbiAgICAvLyBBZ2FyIEZGbXBlZyB4YXRvc2kgYm8nbHNhLCBhc2wgZmF5bG5pIHFheXRhcmlzaFxyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZm1wZWcnKSkge1xyXG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIEtvbXByZXNzaXlhIG11dmFmZmFxaXlhdHNpeiwgYXNsIGZheWwgaXNobGF0aWxhZGknKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgICB1c2VPcmlnaW5hbDogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIFZpZGVvIGZheWwgZWthbmxpZ2luaSBhbmlxbGFzaFxyXG5mdW5jdGlvbiBpc1ZpZGVvRmlsZShtaW1lVHlwZSwgZmlsZW5hbWUpIHtcclxuICBpZiAobWltZVR5cGUgJiYgVklERU9fRk9STUFUUy5pbmNsdWRlcyhtaW1lVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEZheWwgbm9taWRhbiBoYW0gdGVrc2hpcmlzaFxyXG4gIGNvbnN0IHZpZGVvRXh0ZW5zaW9ucyA9IFsnLm1wNCcsICcuYXZpJywgJy5tb3YnLCAnLndtdicsICcuZmx2JywgJy53ZWJtJywgJy5ta3YnLCAnLjNncCcsICcubTR2J107XHJcbiAgY29uc3QgZXh0ZW5zaW9uID0gcGF0aC5leHRuYW1lKGZpbGVuYW1lKS50b0xvd2VyQ2FzZSgpO1xyXG4gIHJldHVybiB2aWRlb0V4dGVuc2lvbnMuaW5jbHVkZXMoZXh0ZW5zaW9uKTtcclxufVxyXG5cclxuLy8gQmFja2JsYXplIG5pIGlzaGdhIHR1c2hpcmlzaFxyXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQjIoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGlmIChpc0IySW5pdGlhbGl6ZWQgJiYgYjIgJiYgYnVja2V0SWQgJiYgZG93bmxvYWRVcmwpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSBCMiBhbHJlYWR5IGluaXRpYWxpemVkJyk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVudmlyb25tZW50IHZhcmlhYmxlcyBuaSB0ZWtzaGlyaXNoXHJcbiAgICBpZiAoIUJBQ0tCTEFaRV9LRVlfSUQgfHwgIUJBQ0tCTEFaRV9BUFBfS0VZIHx8ICFCVUNLRVRfTkFNRSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhY2tibGF6ZSBzb3psYW1hbGFyaSAuZW52LmxvY2FsIGZheWxpZGEgdG9cXCdsaXEgZW1hcycpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn5SEIEluaXRpYWxpemluZyBCYWNrYmxhemUgQjIuLi4nKTtcclxuICAgIGNvbnNvbGUubG9nKCdLZXkgSUQ6JywgQkFDS0JMQVpFX0tFWV9JRC5zdWJzdHJpbmcoMCwgMTApICsgJy4uLicpO1xyXG4gICAgY29uc29sZS5sb2coJ0J1Y2tldDonLCBCVUNLRVRfTkFNRSk7XHJcblxyXG4gICAgLy8gQjIgY2xpZW50IHlhcmF0aXNoXHJcbiAgICBiMiA9IG5ldyBCMih7XHJcbiAgICAgIGFwcGxpY2F0aW9uS2V5SWQ6IEJBQ0tCTEFaRV9LRVlfSUQsXHJcbiAgICAgIGFwcGxpY2F0aW9uS2V5OiBCQUNLQkxBWkVfQVBQX0tFWSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEF1dG9yaXphdHNpeWFcclxuICAgIGNvbnNvbGUubG9nKCfwn5SQIEF1dGhvcml6aW5nIHdpdGggQmFja2JsYXplLi4uJyk7XHJcbiAgICBjb25zdCBhdXRoUmVzcG9uc2UgPSBhd2FpdCBiMi5hdXRob3JpemUoKTtcclxuXHJcbiAgICBpZiAoIWF1dGhSZXNwb25zZT8uZGF0YSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhvcml6YXRpb24gamF2b2IgYm9cXCdzaCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGRvd25sb2FkVXJsID0gYXV0aFJlc3BvbnNlLmRhdGEuZG93bmxvYWRVcmw7XHJcbiAgICBjb25zb2xlLmxvZygn4pyFIEF1dGhvcml6YXRpb24gc3VjY2Vzc2Z1bCcpO1xyXG5cclxuICAgIC8vIEJ1Y2tldCB0b3Bpc2hcclxuICAgIGNvbnNvbGUubG9nKCfwn5eC77iPIEZpbmRpbmcgYnVja2V0Li4uJyk7XHJcbiAgICBjb25zdCBidWNrZXRzUmVzcG9uc2UgPSBhd2FpdCBiMi5saXN0QnVja2V0cygpO1xyXG4gICAgXHJcbiAgICBpZiAoIWJ1Y2tldHNSZXNwb25zZT8uZGF0YT8uYnVja2V0cykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0J1Y2tldHMgcm9cXCd5eGF0aSBvbGlubWFkaScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNSZXNwb25zZS5kYXRhLmJ1Y2tldHMuZmluZChiID0+IGIuYnVja2V0TmFtZSA9PT0gQlVDS0VUX05BTUUpO1xyXG4gICAgXHJcbiAgICBpZiAoIWJ1Y2tldCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEJ1Y2tldCBcIiR7QlVDS0VUX05BTUV9XCIgdG9waWxtYWRpLiBNYXZqdWQgYnVja2V0bGFyOiAke2J1Y2tldHNSZXNwb25zZS5kYXRhLmJ1Y2tldHMubWFwKGIgPT4gYi5idWNrZXROYW1lKS5qb2luKCcsICcpfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1Y2tldElkID0gYnVja2V0LmJ1Y2tldElkO1xyXG4gICAgaXNCMkluaXRpYWxpemVkID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIEJ1Y2tldCB0b3BpbGRpOicsIGJ1Y2tldC5idWNrZXROYW1lKTtcclxuICAgIGNvbnNvbGUubG9nKCfinIUgQnVja2V0IElEOicsIGJ1Y2tldElkKTtcclxuICAgIGNvbnNvbGUubG9nKCfinIUgRG93bmxvYWQgVVJMOicsIGRvd25sb2FkVXJsLnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJyk7XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgQmFja2JsYXplIGluaXRpYWxpemF0aW9uIHhhdG9zaTonKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ01lc3NhZ2U6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdGF0dXM6JywgZXJyb3IucmVzcG9uc2U/LnN0YXR1cyk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdSZXNwb25zZTonLCBlcnJvci5yZXNwb25zZT8uZGF0YSk7XHJcblxyXG4gICAgLy8gUmVzZXQgcWlsaXNoXHJcbiAgICBiMiA9IG51bGw7XHJcbiAgICBpc0IySW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIGJ1Y2tldElkID0gbnVsbDtcclxuICAgIGRvd25sb2FkVXJsID0gbnVsbDtcclxuXHJcbiAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcign4p2MIEJhY2tibGF6ZSBrYWxpdGxhcmkgbm90b1xcJ2dcXCdyaSEgWWFuZ2kgQXBwbGljYXRpb24gS2V5IHlhcmF0aW5nIHZhIHJ1eHNhdGxhcm5pIHRla3NoaXJpbmcuJyk7XHJcbiAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwMykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+KdjCBSdXhzYXQgeW9cXCdxISBBcHBsaWNhdGlvbiBLZXkgZGEgUmVhZC9Xcml0ZSBydXhzYXRsYXJpIGJvci1taSB0ZWtzaGlyaW5nLicpO1xyXG4gICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnRU5PVEZPVU5EJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+KdjCBJbnRlcm5ldCB1bGFuaXNoaSBtdWFtbW9zaScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGDinYwgQmFja2JsYXplIHhhdG9zaTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gRmF5bCBub21pbmkgdG96YWxhc2hcclxuZnVuY3Rpb24gc2FuaXRpemVGaWxlbmFtZShmaWxlbmFtZSkge1xyXG4gIHJldHVybiBmaWxlbmFtZVxyXG4gICAgLnJlcGxhY2UoL1teYS16QS1aMC05XFwtX1xcLl0vZywgJ18nKVxyXG4gICAgLnJlcGxhY2UoL197Mix9L2csICdfJylcclxuICAgIC50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG4vLyBGYXlsbmkgQmFja2JsYXplIGdhIHl1a2xhc2hcclxuYXN5bmMgZnVuY3Rpb24gdXBsb2FkRmlsZVRvQjIoZmlsZVBhdGgsIGZpbGVOYW1lLCBtaW1lVHlwZSkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIWIyIHx8ICFidWNrZXRJZCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0IyIGlzaGdhIHR1c2hpcmlsbWFnYW4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGYXlsIG1hdmp1ZGxpZ2luaSB0ZWtzaGlyaXNoXHJcbiAgICBpZiAoIWV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmF5bCB0b3BpbG1hZGk6ICR7ZmlsZVBhdGh9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/Cfk6QgVXBsb2FkaW5nOicsIGZpbGVOYW1lKTtcclxuICAgIFxyXG4gICAgLy8gRmF5bCBvJ3Fpc2hcclxuICAgIGNvbnN0IGZpbGVCdWZmZXIgPSBhd2FpdCBmcy5yZWFkRmlsZShmaWxlUGF0aCk7XHJcbiAgICBjb25zb2xlLmxvZygn8J+TgSBGaWxlIHNpemU6JywgKGZpbGVCdWZmZXIubGVuZ3RoIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMiksICdNQicpO1xyXG5cclxuICAgIC8vIFVwbG9hZCBVUkwgb2xpc2hcclxuICAgIGNvbnN0IHVwbG9hZFVybFJlc3BvbnNlID0gYXdhaXQgYjIuZ2V0VXBsb2FkVXJsKHsgYnVja2V0SWQgfSk7XHJcbiAgICBcclxuICAgIGlmICghdXBsb2FkVXJsUmVzcG9uc2U/LmRhdGEpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVcGxvYWQgVVJMIG9saW5tYWRpJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmF5bG5pIHl1a2xhc2hcclxuICAgIGNvbnN0IHVwbG9hZFJlc3BvbnNlID0gYXdhaXQgYjIudXBsb2FkRmlsZSh7XHJcbiAgICAgIHVwbG9hZFVybDogdXBsb2FkVXJsUmVzcG9uc2UuZGF0YS51cGxvYWRVcmwsXHJcbiAgICAgIHVwbG9hZEF1dGhUb2tlbjogdXBsb2FkVXJsUmVzcG9uc2UuZGF0YS5hdXRob3JpemF0aW9uVG9rZW4sXHJcbiAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZSxcclxuICAgICAgZGF0YTogZmlsZUJ1ZmZlcixcclxuICAgICAgY29udGVudFR5cGU6IG1pbWVUeXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF1cGxvYWRSZXNwb25zZT8uZGF0YSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VwbG9hZCBqYXZvYiBib1xcJ3NoJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+KchSBVcGxvYWQgc3VjY2Vzc2Z1bDonLCB1cGxvYWRSZXNwb25zZS5kYXRhLmZpbGVOYW1lKTtcclxuICAgIHJldHVybiB1cGxvYWRSZXNwb25zZS5kYXRhO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIFVwbG9hZCBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgVXBsb2FkIHhhdG9zaTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVW11bWl5IFVSTCB5YXJhdGlzaFxyXG5mdW5jdGlvbiBjcmVhdGVQdWJsaWNVcmwoZmlsZU5hbWUpIHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFkb3dubG9hZFVybCB8fCAhQlVDS0VUX05BTUUpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEb3dubG9hZCBVUkwgeW9raSBidWNrZXQgbm9taSB5b1xcJ3EnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZW5jb2RlZEZpbGVOYW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVOYW1lKTtcclxuICAgIGNvbnN0IHB1YmxpY1VybCA9IGAke2Rvd25sb2FkVXJsfS9maWxlLyR7QlVDS0VUX05BTUV9LyR7ZW5jb2RlZEZpbGVOYW1lfWA7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfwn5SXIFB1YmxpYyBVUkw6JywgcHVibGljVXJsKTtcclxuICAgIHJldHVybiBwdWJsaWNVcmw7XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIFVSTCB5YXJhdGlzaCB4YXRvc2k6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVSTCB5YXJhdGlzaCB4YXRvc2k6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFZhcXRpbmNoYWxpayBmYXlsbmkgbydjaGlyaXNoXHJcbmFzeW5jIGZ1bmN0aW9uIGNsZWFudXBUZW1wRmlsZShmaWxlUGF0aCkge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcclxuICAgICAgYXdhaXQgZnMudW5saW5rKGZpbGVQYXRoKTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gVGVtcCBmaWxlIGRlbGV0ZWQ6JywgZmlsZVBhdGgpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBUZW1wIGZpbGUgZGVsZXRpb24gd2FybmluZzonLCBlcnJvci5tZXNzYWdlKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgYXBpOiB7XHJcbiAgICBib2R5UGFyc2VyOiBmYWxzZSxcclxuICAgIHJlc3BvbnNlTGltaXQ6IGZhbHNlLCAvLyBLYXR0YSBmYXlsbGFyIHVjaHVuIGphdm9iIGNoZWtsb3Zpbmkgb2xpYiB0YXNobGFzaFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgXHJcbiAgICAgIGVycm9yOiBcIkZhcWF0IFBPU1Qgc28ncm92bGFyaSBxYWJ1bCBxaWxpbmFkaVwiLFxyXG4gICAgICBtZXRob2Q6IHJlcS5tZXRob2QgXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEZGbXBlZyBtYXZqdWRsaWdpbmkgdGVrc2hpcmlzaFxyXG4gIGNvbnN0IGlzRkZtcGVnQXZhaWxhYmxlID0gYXdhaXQgY2hlY2tGRm1wZWdBdmFpbGFiaWxpdHkoKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5qAIFN0YXJ0aW5nIHVwbG9hZCBwcm9jZXNzLi4uJyk7XHJcbiAgICBcclxuICAgIC8vIEJhY2tibGF6ZSBuaSBpc2hnYSB0dXNoaXJpc2hcclxuICAgIGF3YWl0IGluaXRpYWxpemVCMigpO1xyXG4gICAgXHJcbiAgICAvLyBWYXF0aW5jaGFsaWsgcGFwa2EgeWFyYXRpc2ggdmEgdGVrc2hpcmlzaFxyXG4gICAgbGV0IHRlbXBEaXI7XHJcbiAgICB0cnkge1xyXG4gICAgICB0ZW1wRGlyID0gb3MudG1wZGlyKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OBIFVzaW5nIHRlbXAgZGlyZWN0b3J5OicsIHRlbXBEaXIpO1xyXG4gICAgICBcclxuICAgICAgLy8gVGVtcCBwYXBrYSBtYXZqdWRsaWdpbmkgdGVrc2hpcmlzaCB2YSB5YXJhdGlzaFxyXG4gICAgICBpZiAoIWV4aXN0c1N5bmModGVtcERpcikpIHtcclxuICAgICAgICBhd2FpdCBmcy5ta2Rpcih0ZW1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+TgSBDcmVhdGVkIHRlbXAgZGlyZWN0b3J5OicsIHRlbXBEaXIpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoICh0ZW1wRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIFRlbXAgZGlyZWN0b3J5IGVycm9yOicsIHRlbXBFcnJvci5tZXNzYWdlKTtcclxuICAgICAgLy8gRmFsbGJhY2sgLSBqb3JpeSBwYXBrYWRhIHRlbXAgeWFyYXRpc2hcclxuICAgICAgdGVtcERpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAndGVtcCcpO1xyXG4gICAgICBpZiAoIWV4aXN0c1N5bmModGVtcERpcikpIHtcclxuICAgICAgICBhd2FpdCBmcy5ta2Rpcih0ZW1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+TgSBDcmVhdGVkIGZhbGxiYWNrIHRlbXAgZGlyZWN0b3J5OicsIHRlbXBEaXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZvcm1pZGFibGUgc296bGFtYWxhcmkgLSBiYXJjaGEgaGFqbSBjaGVrbG92bGFyaW5pIG9saWIgdGFzaGxhc2hcclxuICAgIGNvbnN0IGZvcm0gPSBmb3JtaWRhYmxlKHtcclxuICAgICAgbXVsdGlwbGVzOiB0cnVlLFxyXG4gICAgICB1cGxvYWREaXI6IHRlbXBEaXIsXHJcbiAgICAgIGtlZXBFeHRlbnNpb25zOiB0cnVlLFxyXG4gICAgICBhbGxvd0VtcHR5RmlsZXM6IGZhbHNlLFxyXG4gICAgICBtaW5GaWxlU2l6ZTogMSxcclxuICAgICAgLy8gQmFyY2hhIGhham0gY2hla2xvdmxhcmluaSBvbGliIHRhc2hsYWRpa1xyXG4gICAgICBtYXhGaWxlU2l6ZTogSW5maW5pdHksIC8vIENoZWtzaXogZmF5bCBoYWptaVxyXG4gICAgICBtYXhGaWxlczogSW5maW5pdHksICAgIC8vIENoZWtzaXogZmF5bCBzb25pICBcclxuICAgICAgbWF4VG90YWxGaWxlU2l6ZTogSW5maW5pdHksIC8vIENoZWtzaXogamFtaSBoYWptXHJcbiAgICAgIG1heEZpZWxkc1NpemU6IEluZmluaXR5LCAgICAvLyBDaGVrc2l6IGZpZWxkIGhham1pXHJcbiAgICAgIGNyZWF0ZURpcnNGcm9tVXBsb2FkczogdHJ1ZSwgLy8gUGFwa2FuaSBhdnRvbWF0aWsgeWFyYXRpc2hcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn5OLIFBhcnNpbmcgZm9ybSBkYXRhLi4uJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IHsgZmllbGRzLCBmaWxlcyB9ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBmb3JtLnBhcnNlKHJlcSwgKGVyciwgZmllbGRzLCBmaWxlcykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGb3JtIHBhcnNpbmcgZXJyb3I6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRm9ybSBwYXJzaW5nIHhhdG9zaTogJHtlcnIubWVzc2FnZX1gKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgRm9ybSBwYXJzZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICByZXNvbHZlKHsgZmllbGRzLCBmaWxlcyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/Cfk4EgRmlsZXMgcmVjZWl2ZWQ6JywgT2JqZWN0LmtleXMoZmlsZXMpKTtcclxuICAgIGNvbnNvbGUubG9nKCfwn5OdIEZpZWxkcyByZWNlaXZlZDonLCBPYmplY3Qua2V5cyhmaWVsZHMpKTtcclxuXHJcbiAgICAvLyBGYXlsIG1hdmp1ZGxpZ2luaSB0ZWtzaGlyaXNoXHJcbiAgICBpZiAoIWZpbGVzLmZpbGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXHJcbiAgICAgICAgZXJyb3I6ICdIZWNoIHFhbmRheSBmYXlsIHl1a2xhbm1hZGknLFxyXG4gICAgICAgIHJlY2VpdmVkOiBPYmplY3Qua2V5cyhmaWxlcylcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBsb2FkZWRGaWxlcyA9IEFycmF5LmlzQXJyYXkoZmlsZXMuZmlsZSkgPyBmaWxlcy5maWxlIDogW2ZpbGVzLmZpbGVdO1xyXG4gICAgXHJcbiAgICAvLyBKYW1pIGhham1uaSBoaXNvYmxhc2ggKGZhcWF0IG1hJ2x1bW90IHVjaHVuLCBjaGVrbGFzaCB1Y2h1biBlbWFzKVxyXG4gICAgY29uc3QgdG90YWxTaXplID0gdXBsb2FkZWRGaWxlcy5yZWR1Y2UoKHN1bSwgZmlsZSkgPT4gc3VtICsgKGZpbGUuc2l6ZSB8fCAwKSwgMCk7XHJcblxyXG4gICAgLy8gRmllbGRzIG5pIG9saXNoXHJcbiAgICBjb25zdCB0eXBlID0gQXJyYXkuaXNBcnJheShmaWVsZHMudHlwZSkgPyBmaWVsZHMudHlwZVswXSA6IChmaWVsZHMudHlwZSB8fCAncG9zdCcpO1xyXG4gICAgY29uc3QgdXNlcm5hbWUgPSBBcnJheS5pc0FycmF5KGZpZWxkcy51c2VybmFtZSkgPyBmaWVsZHMudXNlcm5hbWVbMF0gOiBmaWVsZHMudXNlcm5hbWU7XHJcbiAgICBjb25zdCBwb3N0SW5kZXggPSBBcnJheS5pc0FycmF5KGZpZWxkcy5wb3N0SW5kZXgpID8gZmllbGRzLnBvc3RJbmRleFswXSA6IGZpZWxkcy5wb3N0SW5kZXg7XHJcblxyXG4gICAgaWYgKCF1c2VybmFtZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcclxuICAgICAgICBlcnJvcjogJ1VzZXJuYW1lIG1hamJ1cml5JyxcclxuICAgICAgICBmaWVsZHM6IE9iamVjdC5rZXlzKGZpZWxkcylcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYPCfk4ogVXBsb2FkIHNlc3Npb246IHR5cGU9JHt0eXBlfSwgdXNlcm5hbWU9JHt1c2VybmFtZX0sIGZpbGVzPSR7dXBsb2FkZWRGaWxlcy5sZW5ndGh9YCk7XHJcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBUb3RhbCBzaXplOiAkeyh0b3RhbFNpemUgLyAxMDI0IC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IEdCYCk7XHJcbiAgICBjb25zb2xlLmxvZyhg8J+OrCBWaWRlbyBjb21wcmVzc2lvbjogJHtpc0ZGbXBlZ0F2YWlsYWJsZSA/ICdFTkFCTEVEJyA6ICdESVNBQkxFRCd9YCk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xyXG4gICAgY29uc3QgZXJyb3JzID0gW107XHJcblxyXG4gICAgLy8gSGFyIGJpciBmYXlsbmkgeXVrbGFzaFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cGxvYWRlZEZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGZpbGUgPSB1cGxvYWRlZEZpbGVzW2ldO1xyXG4gICAgICBsZXQgdGVtcEZpbGVQYXRoID0gbnVsbDtcclxuICAgICAgbGV0IGNvbXByZXNzZWRGaWxlUGF0aCA9IG51bGw7XHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGZpbGUub3JpZ2luYWxGaWxlbmFtZSB8fCBgZmlsZV8ke2kgKyAxfWA7XHJcbiAgICAgICAgY29uc3QgbWltZVR5cGUgPSBmaWxlLm1pbWV0eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xyXG4gICAgICAgIGNvbnN0IGZpbGVTaXplID0gZmlsZS5zaXplIHx8IDA7XHJcbiAgICAgICAgdGVtcEZpbGVQYXRoID0gZmlsZS5maWxlcGF0aDtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfk6QgUHJvY2Vzc2luZyAke2kgKyAxfS8ke3VwbG9hZGVkRmlsZXMubGVuZ3RofTogJHtvcmlnaW5hbE5hbWV9YCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfk4ogU2l6ZTogJHsoZmlsZVNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQiwgVHlwZTogJHttaW1lVHlwZX1gKTtcclxuXHJcbiAgICAgICAgLy8gRmFxYXQgYm8nc2ggZmF5bCB0ZWtzaGlyaXNoIHFvbGRpa1xyXG4gICAgICAgIGlmIChmaWxlU2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb1xcJ3NoIGZheWwnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZheWwgbWF2anVkbGlnaW5pIHRla3NoaXJpc2hcclxuICAgICAgICBpZiAoIWV4aXN0c1N5bmModGVtcEZpbGVQYXRoKSkge1xyXG4gICAgICAgICAgLy8gQWdhciBmYXlsIHlvJ3EgYm8nbHNhLCBiaXJveiBrdXRpYiBxYXl0YSB0ZWtzaGlyaXNoXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn4o+zIEZpbGUgbm90IGZvdW5kLCB3YWl0aW5nIDEgc2Vjb25kLi4uJyk7XHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoIWV4aXN0c1N5bmModGVtcEZpbGVQYXRoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhcXRpbmNoYWxpayBmYXlsIHRvcGlsbWFkaTogJHt0ZW1wRmlsZVBhdGh9YCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGYXlsIGhham1pbmkgb2xpc2ggdmEgdGVrc2hpcmlzaFxyXG4gICAgICAgIGNvbnN0IGZpbGVTdGF0cyA9IGF3YWl0IGZzLnN0YXQodGVtcEZpbGVQYXRoKTtcclxuICAgICAgICBjb25zdCBhY3R1YWxGaWxlU2l6ZSA9IGZpbGVTdGF0cy5zaXplO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIEZpbGUgc3RhdHM6IHJlcG9ydGVkPSR7ZmlsZVNpemV9LCBhY3R1YWw9JHthY3R1YWxGaWxlU2l6ZX1gKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYWN0dWFsRmlsZVNpemUgPT09IDApIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQm9cXCdzaCBmYXlsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWaWRlbyBmYXlsIGVrYW5saWdpbmkgYW5pcWxhc2ggdmEgc2lxaXNoXHJcbiAgICAgICAgbGV0IGZpbmFsRmlsZVBhdGggPSB0ZW1wRmlsZVBhdGg7XHJcbiAgICAgICAgbGV0IGZpbmFsRmlsZVNpemUgPSBhY3R1YWxGaWxlU2l6ZTtcclxuICAgICAgICBsZXQgY29tcHJlc3Npb25JbmZvID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGlzRkZtcGVnQXZhaWxhYmxlICYmIGlzVmlkZW9GaWxlKG1pbWVUeXBlLCBvcmlnaW5hbE5hbWUpKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+OrCBWaWRlbyBmYXlsIGFuaXFsYW5kaSwga29tcHJlc3NpeWEgYm9zaGxhbm1vcWRhLi4uJyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEtvbXByZXNzaXlhIHVjaHVuIHlhbmdpIGZheWwgeW8nbGlcclxuICAgICAgICAgIGNvbnN0IGNvbXByZXNzZWROYW1lID0gYGNvbXByZXNzZWRfJHtEYXRlLm5vdygpfV8ke3BhdGguYmFzZW5hbWUodGVtcEZpbGVQYXRoLCBwYXRoLmV4dG5hbWUodGVtcEZpbGVQYXRoKSl9Lm1wNGA7XHJcbiAgICAgICAgICBjb21wcmVzc2VkRmlsZVBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgY29tcHJlc3NlZE5hbWUpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb21wcmVzc2lvbkluZm8gPSBhd2FpdCBjb21wcmVzc1ZpZGVvKHRlbXBGaWxlUGF0aCwgY29tcHJlc3NlZEZpbGVQYXRoLCBtaW1lVHlwZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoY29tcHJlc3Npb25JbmZvLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICBmaW5hbEZpbGVQYXRoID0gY29tcHJlc3NlZEZpbGVQYXRoO1xyXG4gICAgICAgICAgICAgIGZpbmFsRmlsZVNpemUgPSBjb21wcmVzc2lvbkluZm8uY29tcHJlc3NlZFNpemU7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSBWaWRlbyBrb21wcmVzc2l5YSBtdXZhZmZhcWl5YXRsaTogJHtjb21wcmVzc2lvbkluZm8uY29tcHJlc3Npb25SYXRpb30lIHRlamFzaGApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uSW5mby51c2VPcmlnaW5hbCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gS29tcHJlc3NpeWEgaXNobGFtYWRpLCBhc2wgZmF5bCBpc2hsYXRpbGFkaScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChjb21wcmVzc2lvbkVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBWaWRlbyBrb21wcmVzc2l5YSB4YXRvc2k6JywgY29tcHJlc3Npb25FcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBBc2wgZmF5bCBpc2hsYXRpbGFkaScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmF5bCBub21pbmkgeWFyYXRpc2hcclxuICAgICAgICBjb25zdCBzYWZlT3JpZ2luYWxOYW1lID0gc2FuaXRpemVGaWxlbmFtZShvcmlnaW5hbE5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBjb21wcmVzc2lvbkluZm8/LnN1Y2Nlc3MgPyAnLm1wNCcgOiBwYXRoLmV4dG5hbWUoc2FmZU9yaWdpbmFsTmFtZSkgfHwgJyc7XHJcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCByYW5kb21JZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KTtcclxuXHJcbiAgICAgICAgbGV0IGZpbGVOYW1lO1xyXG4gICAgICAgIGlmICh0eXBlID09PSAncHJvZmlsZScpIHtcclxuICAgICAgICAgIGZpbGVOYW1lID0gYHByb2ZpbGVzLyR7dXNlcm5hbWV9XyR7dGltZXN0YW1wfV8ke3JhbmRvbUlkfSR7ZmlsZUV4dGVuc2lvbn1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBwb3N0U3VmZml4ID0gcG9zdEluZGV4ID8gYF9wb3N0JHtwb3N0SW5kZXh9YCA6ICcnO1xyXG4gICAgICAgICAgY29uc3QgZmlsZVN1ZmZpeCA9IHVwbG9hZGVkRmlsZXMubGVuZ3RoID4gMSA/IGBfJHtpICsgMX1gIDogJyc7XHJcbiAgICAgICAgICBmaWxlTmFtZSA9IGBwb3N0cy8ke3VzZXJuYW1lfSR7cG9zdFN1ZmZpeH0ke2ZpbGVTdWZmaXh9XyR7dGltZXN0YW1wfV8ke3JhbmRvbUlkfSR7ZmlsZUV4dGVuc2lvbn1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYPCfjq8gRGVzdGluYXRpb246ICR7ZmlsZU5hbWV9YCk7XHJcblxyXG4gICAgICAgIC8vIEZheWxuaSB5dWtsYXNoXHJcbiAgICAgICAgY29uc3QgdXBsb2FkUmVzdWx0ID0gYXdhaXQgdXBsb2FkRmlsZVRvQjIoZmluYWxGaWxlUGF0aCwgZmlsZU5hbWUsIGNvbXByZXNzaW9uSW5mbz8uc3VjY2VzcyA/ICd2aWRlby9tcDQnIDogbWltZVR5cGUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVtdW1peSBVUkwgeWFyYXRpc2hcclxuICAgICAgICBjb25zdCBwdWJsaWNVcmwgPSBjcmVhdGVQdWJsaWNVcmwoZmlsZU5hbWUpO1xyXG5cclxuICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIHVybDogcHVibGljVXJsLFxyXG4gICAgICAgICAgZmlsZW5hbWU6IHVwbG9hZFJlc3VsdC5maWxlTmFtZSxcclxuICAgICAgICAgIG9yaWdpbmFsTmFtZTogb3JpZ2luYWxOYW1lLFxyXG4gICAgICAgICAgZmlsZVNpemU6IGZpbmFsRmlsZVNpemUsXHJcbiAgICAgICAgICBvcmlnaW5hbEZpbGVTaXplOiBhY3R1YWxGaWxlU2l6ZSxcclxuICAgICAgICAgIG1pbWVUeXBlOiBjb21wcmVzc2lvbkluZm8/LnN1Y2Nlc3MgPyAndmlkZW8vbXA0JyA6IG1pbWVUeXBlLFxyXG4gICAgICAgICAgYnVja2V0OiBCVUNLRVRfTkFNRSxcclxuICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICBmaWxlSW5kZXg6IGkgKyAxLFxyXG4gICAgICAgICAgdG90YWxGaWxlczogdXBsb2FkZWRGaWxlcy5sZW5ndGgsXHJcbiAgICAgICAgICBjb21wcmVzc2VkOiBjb21wcmVzc2lvbkluZm8/LnN1Y2Nlc3MgfHwgZmFsc2UsXHJcbiAgICAgICAgICBjb21wcmVzc2lvblJhdGlvOiBjb21wcmVzc2lvbkluZm8/LmNvbXByZXNzaW9uUmF0aW8gfHwgbnVsbCxcclxuICAgICAgICAgIGNvbXByZXNzaW9uRHVyYXRpb246IGNvbXByZXNzaW9uSW5mbz8uZHVyYXRpb24gfHwgbnVsbCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBTdWNjZXNzICR7aSArIDF9LyR7dXBsb2FkZWRGaWxlcy5sZW5ndGh9OiAke29yaWdpbmFsTmFtZX1gKTtcclxuXHJcbiAgICAgIH0gY2F0Y2ggKGZpbGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGaWxlIGVycm9yICR7aSArIDF9LyR7dXBsb2FkZWRGaWxlcy5sZW5ndGh9OmAsIGZpbGVFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICBlcnJvcnMucHVzaCh7IFxyXG4gICAgICAgICAgZmlsZW5hbWU6IGZpbGUub3JpZ2luYWxGaWxlbmFtZSB8fCBgZmlsZV8ke2kgKyAxfWAsIFxyXG4gICAgICAgICAgZXJyb3I6IGZpbGVFcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgZmlsZUluZGV4OiBpICsgMSBcclxuICAgICAgICB9KTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAvLyBWYXF0aW5jaGFsaWsgZmF5bGxhcm5pIG8nY2hpcmlzaFxyXG4gICAgICAgIGlmICh0ZW1wRmlsZVBhdGgpIHtcclxuICAgICAgICAgIGF3YWl0IGNsZWFudXBUZW1wRmlsZSh0ZW1wRmlsZVBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29tcHJlc3NlZEZpbGVQYXRoICYmIGNvbXByZXNzZWRGaWxlUGF0aCAhPT0gdGVtcEZpbGVQYXRoKSB7XHJcbiAgICAgICAgICBhd2FpdCBjbGVhbnVwVGVtcEZpbGUoY29tcHJlc3NlZEZpbGVQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOYXRpamFcclxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xyXG4gICAgICBzdWNjZXNzOiBlcnJvcnMubGVuZ3RoID09PSAwLFxyXG4gICAgICB1cGxvYWRlZDogcmVzdWx0cyxcclxuICAgICAgZXJyb3JzOiBlcnJvcnMsXHJcbiAgICAgIHN1bW1hcnk6IHtcclxuICAgICAgICB0b3RhbEZpbGVzOiB1cGxvYWRlZEZpbGVzLmxlbmd0aCxcclxuICAgICAgICBzdWNjZXNzZnVsOiByZXN1bHRzLmxlbmd0aCxcclxuICAgICAgICBmYWlsZWQ6IGVycm9ycy5sZW5ndGgsXHJcbiAgICAgICAgdG90YWxTaXplOiB0b3RhbFNpemUgPCAxMDI0ICogMTAyNCAqIDEwMjQgXHJcbiAgICAgICAgICA/IGAkeyh0b3RhbFNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQmBcclxuICAgICAgICAgIDogYCR7KHRvdGFsU2l6ZSAvIDEwMjQgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1HQmAsXHJcbiAgICAgICAgdmlkZW9zQ29tcHJlc3NlZDogcmVzdWx0cy5maWx0ZXIociA9PiByLmNvbXByZXNzZWQpLmxlbmd0aCxcclxuICAgICAgICBmZm1wZWdBdmFpbGFibGU6IGlzRkZtcGVnQXZhaWxhYmxlLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+OiSBVcGxvYWQgY29tcGxldGU6JywgcmVzcG9uc2Uuc3VtbWFyeSk7XHJcblxyXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVycm9ycy5sZW5ndGggPT09IDAgPyAyMDAgOiAocmVzdWx0cy5sZW5ndGggPiAwID8gMjA3IDogNDAwKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24ocmVzcG9uc2UpO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEdsb2JhbCBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1N0YWNrOicsIGVycm9yLnN0YWNrKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgIGVycm9yOiAnU2VydmVyIHhhdG9saWdpJywgXHJcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiZm9ybWlkYWJsZSIsImZzIiwiZXhpc3RzU3luYyIsInBhdGgiLCJvcyIsIkIyIiwiZXhlYyIsInByb21pc2lmeSIsImV4ZWNBc3luYyIsIlNVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX0FOT05fS0VZIiwiQkFDS0JMQVpFX0tFWV9JRCIsInByb2Nlc3MiLCJlbnYiLCJCQUNLQkxBWkVfQVBQX0tFWSIsIkJVQ0tFVF9OQU1FIiwic3VwYWJhc2VDbGllbnQiLCJiMiIsImlzQjJJbml0aWFsaXplZCIsImJ1Y2tldElkIiwiZG93bmxvYWRVcmwiLCJWSURFT19GT1JNQVRTIiwiVklERU9fQ09NUFJFU1NJT05fU0VUVElOR1MiLCJyZXNvbHV0aW9uIiwidmlkZW9CaXRyYXRlIiwiYXVkaW9CaXRyYXRlIiwiZnBzIiwiY29kZWMiLCJhdWRpb0NvZGVjIiwicHJlc2V0IiwiY3JmIiwiY2hlY2tGRm1wZWdBdmFpbGFiaWxpdHkiLCJzdGRvdXQiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImNvbXByZXNzVmlkZW8iLCJpbnB1dFBhdGgiLCJvdXRwdXRQYXRoIiwibWltZVR5cGUiLCJmZm1wZWdDb21tYW5kIiwiam9pbiIsInN1YnN0cmluZyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJzdGRlcnIiLCJ0aW1lb3V0IiwibWF4QnVmZmVyIiwiZW5kVGltZSIsImR1cmF0aW9uIiwidG9GaXhlZCIsIm9yaWdpbmFsU3RhdHMiLCJzdGF0IiwiY29tcHJlc3NlZFN0YXRzIiwib3JpZ2luYWxTaXplIiwic2l6ZSIsImNvbXByZXNzZWRTaXplIiwiY29tcHJlc3Npb25SYXRpbyIsInN1Y2Nlc3MiLCJwYXJzZUZsb2F0IiwiRXJyb3IiLCJtZXNzYWdlIiwidXNlT3JpZ2luYWwiLCJpc1ZpZGVvRmlsZSIsImZpbGVuYW1lIiwidG9Mb3dlckNhc2UiLCJ2aWRlb0V4dGVuc2lvbnMiLCJleHRlbnNpb24iLCJleHRuYW1lIiwiaW5pdGlhbGl6ZUIyIiwiYXBwbGljYXRpb25LZXlJZCIsImFwcGxpY2F0aW9uS2V5IiwiYXV0aFJlc3BvbnNlIiwiYXV0aG9yaXplIiwiZGF0YSIsImJ1Y2tldHNSZXNwb25zZSIsImxpc3RCdWNrZXRzIiwiYnVja2V0cyIsImJ1Y2tldCIsImZpbmQiLCJiIiwiYnVja2V0TmFtZSIsIm1hcCIsInJlc3BvbnNlIiwic3RhdHVzIiwiY29kZSIsInNhbml0aXplRmlsZW5hbWUiLCJyZXBsYWNlIiwidXBsb2FkRmlsZVRvQjIiLCJmaWxlUGF0aCIsImZpbGVOYW1lIiwiZmlsZUJ1ZmZlciIsInJlYWRGaWxlIiwibGVuZ3RoIiwidXBsb2FkVXJsUmVzcG9uc2UiLCJnZXRVcGxvYWRVcmwiLCJ1cGxvYWRSZXNwb25zZSIsInVwbG9hZEZpbGUiLCJ1cGxvYWRVcmwiLCJ1cGxvYWRBdXRoVG9rZW4iLCJhdXRob3JpemF0aW9uVG9rZW4iLCJjb250ZW50VHlwZSIsImNyZWF0ZVB1YmxpY1VybCIsImVuY29kZWRGaWxlTmFtZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInB1YmxpY1VybCIsImNsZWFudXBUZW1wRmlsZSIsInVubGluayIsIndhcm4iLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwicmVzcG9uc2VMaW1pdCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJqc29uIiwiaXNGRm1wZWdBdmFpbGFibGUiLCJ0ZW1wRGlyIiwidG1wZGlyIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJ0ZW1wRXJyb3IiLCJjd2QiLCJmb3JtIiwibXVsdGlwbGVzIiwidXBsb2FkRGlyIiwia2VlcEV4dGVuc2lvbnMiLCJhbGxvd0VtcHR5RmlsZXMiLCJtaW5GaWxlU2l6ZSIsIm1heEZpbGVTaXplIiwiSW5maW5pdHkiLCJtYXhGaWxlcyIsIm1heFRvdGFsRmlsZVNpemUiLCJtYXhGaWVsZHNTaXplIiwiY3JlYXRlRGlyc0Zyb21VcGxvYWRzIiwiZmllbGRzIiwiZmlsZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInBhcnNlIiwiZXJyIiwiT2JqZWN0Iiwia2V5cyIsImZpbGUiLCJyZWNlaXZlZCIsInVwbG9hZGVkRmlsZXMiLCJBcnJheSIsImlzQXJyYXkiLCJ0b3RhbFNpemUiLCJyZWR1Y2UiLCJzdW0iLCJ0eXBlIiwidXNlcm5hbWUiLCJwb3N0SW5kZXgiLCJyZXN1bHRzIiwiZXJyb3JzIiwiaSIsInRlbXBGaWxlUGF0aCIsImNvbXByZXNzZWRGaWxlUGF0aCIsIm9yaWdpbmFsTmFtZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJtaW1ldHlwZSIsImZpbGVTaXplIiwiZmlsZXBhdGgiLCJzZXRUaW1lb3V0IiwiZmlsZVN0YXRzIiwiYWN0dWFsRmlsZVNpemUiLCJmaW5hbEZpbGVQYXRoIiwiZmluYWxGaWxlU2l6ZSIsImNvbXByZXNzaW9uSW5mbyIsImNvbXByZXNzZWROYW1lIiwiYmFzZW5hbWUiLCJjb21wcmVzc2lvbkVycm9yIiwic2FmZU9yaWdpbmFsTmFtZSIsImZpbGVFeHRlbnNpb24iLCJ0aW1lc3RhbXAiLCJyYW5kb21JZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInBvc3RTdWZmaXgiLCJmaWxlU3VmZml4IiwidXBsb2FkUmVzdWx0IiwicHVzaCIsInVybCIsIm9yaWdpbmFsRmlsZVNpemUiLCJmaWxlSW5kZXgiLCJ0b3RhbEZpbGVzIiwiY29tcHJlc3NlZCIsImNvbXByZXNzaW9uRHVyYXRpb24iLCJmaWxlRXJyb3IiLCJ1cGxvYWRlZCIsInN1bW1hcnkiLCJzdWNjZXNzZnVsIiwiZmFpbGVkIiwidmlkZW9zQ29tcHJlc3NlZCIsImZpbHRlciIsInIiLCJmZm1wZWdBdmFpbGFibGUiLCJzdGF0dXNDb2RlIiwic3RhY2siLCJkZXRhaWxzIiwidG9JU09TdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();